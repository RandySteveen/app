"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[932],{932:(O,p,l)=>{l.r(p),l.d(p,{NewclientPageModule:()=>y});var u=l(6814),d=l(95),r=l(9843),h=l(4193),f=l(5861),_=l(6726),P=l(7921),Z=l(553),e=l(5879),T=l(9862),v=l(7076),w=l(7584),N=l(2014);function C(n,a){if(1&n){const s=e.EpF();e.TgZ(0,"a",6),e.NdJ("click",function(){e.CHM(s);const i=e.oxw().$implicit,o=e.oxw();return e.KtG(o.order(i.idsuc))}),e._UZ(1,"ion-icon",19),e.qZA()}}function I(n,a){if(1&n){const s=e.EpF();e.TgZ(0,"ion-row")(1,"ion-col",4),e._UZ(2,"strong"),e.qZA(),e.TgZ(3,"ion-col",4),e._uU(4),e.qZA(),e.TgZ(5,"ion-col",5),e._uU(6),e.qZA(),e.TgZ(7,"ion-col",7),e._uU(8),e.qZA(),e.TgZ(9,"ion-col",5),e._uU(10),e.qZA(),e.TgZ(11,"ion-col",5),e._uU(12),e.qZA(),e._UZ(13,"ion-col",8),e.TgZ(14,"ion-col",14)(15,"a")(16,"ion-icon",15),e.NdJ("click",function(){const o=e.CHM(s).$implicit,c=e.oxw();return e.KtG(c.editclient(o.idsuc))}),e.qZA()(),e.TgZ(17,"a")(18,"ion-icon",16),e.NdJ("click",function(){const o=e.CHM(s).$implicit,c=e.oxw();return e.KtG(c.newsite(o.codcli))}),e.qZA()(),e.YNc(19,C,2,0,"a",17),e.TgZ(20,"a")(21,"ion-icon",18),e.NdJ("click",function(){const o=e.CHM(s).$implicit,c=e.oxw();return e.KtG(c.neworder(o.idsuc))}),e.qZA()()()()}if(2&n){const s=a.$implicit,t=a.index,i=e.oxw();e.xp6(4),e.Oqu((i.currentPage-1)*i.itemsPerPage+t+1),e.xp6(2),e.Oqu(s.codcli),e.xp6(2),e.Oqu(s.nomcli),e.xp6(2),e.Oqu(s.dirsed),e.xp6(2),e.hij(" ",s.orders," "),e.xp6(7),e.Q6J("ngIf","0"===i.status&&i.currentIdsucSet.has(s.idsuc))}}function A(n,a){if(1&n&&(e.TgZ(0,"ion-select-option",20),e._uU(1),e.qZA()),2&n){const s=a.$implicit;e.Q6J("value",s),e.xp6(1),e.hij(" ",s," ")}}const x=[{path:"",component:(()=>{var n;class a{constructor(t,i,o,c,g,m){this.http=t,this.loginService=i,this.RoutingService=o,this.Router=c,this.RoutingClient=g,this.storage=m,this.currentIdsucSet=new Set,this.searchText="",this.items=[],this.currentPage=1,this.itemsPerPageOptions=[5,10,20],this.itemsPerPage=10,this.displayedItems=[],this.totalPages=1,this.initStorage()}initStorage(){var t=this;return(0,f.Z)(function*(){yield t.storage.create()})()}ngOnInit(){var t=this;return(0,f.Z)(function*(){const i=yield t.loginService.getLoginInfo(),{cedusu:o}=(0,_.Z)(i);t.RoutingClient.codved$.pipe((0,P.O)([])).subscribe(c=>{t.viewData(),t.http.post(`${Z.N.apiOrdersUrl}/global/${o}`,c).subscribe(g=>{t.status=g.info[0].estped;for(const U of g.info)t.currentIdsucSet.add(U.idsuc);const m={status:t.status,currentIdsucSet:Array.from(t.currentIdsucSet)};t.storage.set(`ngOnInit_data_${o}`,m)})})})()}viewData(){this.loginService.getLoginInfo().then(t=>{const{cedusu:i}=(0,_.Z)(t);this.RoutingService.codved$.pipe((0,P.O)([])).subscribe(o=>{this.http.post(`${Z.N.APIurl}/new/${i}`,o).subscribe(c=>{this.items=c.info,this.sortColumn("codcli"),this.loadDisplayedItems(),localStorage.setItem("storedClient",JSON.stringify(this.items))},c=>{const g=localStorage.getItem("storedClient");g&&(this.items=JSON.parse(g),this.sortColumn("codcli"),this.loadDisplayedItems())})})}),this.totalPages=Math.ceil(this.filteredItems.length/this.itemsPerPage),this.currentPage=1,this.loadDisplayedItems()}sortColumn(t){this.filteredItems.sort((i,o)=>i[t]<o[t]?-1:i[t]>o[t]?1:0),this.loadDisplayedItems()}loadDisplayedItems(){const t=(this.currentPage-1)*this.itemsPerPage;this.displayedItems=this.filteredItems.slice(t,t+this.itemsPerPage)}onPageChange(t){this.itemsPerPage=t.detail.value,this.totalPages=Math.ceil(this.filteredItems.length/this.itemsPerPage),this.currentPage=1,this.loadDisplayedItems(),localStorage.setItem("storedClients",JSON.stringify(this.items))}goToPage(t){t>=1&&t<=this.totalPages&&(this.currentPage=t,this.loadDisplayedItems(),localStorage.setItem("storedClients",JSON.stringify(this.items)))}get filteredItems(){return this.items.filter(t=>t.codcli.toLowerCase().includes(this.searchText.toLowerCase())||t.nomcli.toLowerCase().includes(this.searchText.toLowerCase()))}onSearchInput(t){const i=t.target;null!=i.value&&(this.searchText=i.value,this.loadDisplayedItems())}editclient(t){this.Router.navigate(["newclient-edit",t])}newsite(t){this.Router.navigate(["newclientsites",t])}neworder(t){this.Router.navigate(["newordersclient",t])}order(t){this.Router.navigate(["orderofeachcustomernew",t])}invoice(t){this.Router.navigate(["invoice-new-data",t])}}return(n=a).\u0275fac=function(t){return new(t||n)(e.Y36(T.eN),e.Y36(v.F),e.Y36(w.E),e.Y36(h.F0),e.Y36(w.E),e.Y36(N.K))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-newclient"]],decls:45,vars:7,consts:[[3,"translucent"],["position","floating"],["name","search-outline"],["placeholder","Buscar...",1,"custom-search-input",3,"ngModel","ngModelChange","input"],["size","1"],["size","1.5","align","center"],[3,"click"],["size","2","align","center"],["size","0.5"],["size","1.5"],[4,"ngFor","ngForOf"],[3,"value","ionChange"],[3,"value",4,"ngFor","ngForOf"],[3,"disabled","click"],["size","1.5",1,"action-column"],["name","create-outline",2,"font-size","30px","color","greenyellow",3,"click"],["name","home-outline",2,"font-size","30px","color","rgb(247, 240, 240)",3,"click"],[3,"click",4,"ngIf"],["name","cart-outline",2,"font-size","30px","color","orange",3,"click"],["name","bag-handle-outline",2,"font-size","30px","color","cyan"],[3,"value"]],template:function(t,i){1&t&&(e.TgZ(0,"ion-header",0)(1,"ion-toolbar")(2,"ion-title"),e._uU(3,"newclient"),e.qZA()()(),e._UZ(4,"br"),e.TgZ(5,"ion-content")(6,"ion-item")(7,"ion-label",1),e._UZ(8,"ion-icon",2),e._uU(9,".Buscar"),e.qZA(),e.TgZ(10,"ion-input",3),e.NdJ("ngModelChange",function(c){return i.searchText=c})("input",function(c){return i.onSearchInput(c)}),e.qZA()(),e._UZ(11,"br")(12,"br"),e.TgZ(13,"ion-grid")(14,"ion-row")(15,"ion-col",4),e._UZ(16,"strong"),e.qZA(),e.TgZ(17,"ion-col",4)(18,"strong"),e._uU(19,"No"),e.qZA()(),e.TgZ(20,"ion-col",5)(21,"strong",6),e.NdJ("click",function(){return i.sortColumn("codcli")}),e._uU(22,"codcli"),e.qZA()(),e.TgZ(23,"ion-col",7)(24,"strong",6),e.NdJ("click",function(){return i.sortColumn("nomcli")}),e._uU(25,"Cliente"),e.qZA()(),e.TgZ(26,"ion-col",5)(27,"strong"),e._uU(28,"Sedes"),e.qZA()(),e.TgZ(29,"ion-col",5)(30,"strong"),e._uU(31,"Pedidos"),e.qZA()(),e.TgZ(32,"ion-col",8),e._UZ(33,"strong"),e.qZA(),e.TgZ(34,"ion-col",9)(35,"strong"),e._uU(36,"Accion"),e.qZA()()(),e.YNc(37,I,22,6,"ion-row",10),e.qZA(),e.TgZ(38,"ion-select",11),e.NdJ("ionChange",function(c){return i.onPageChange(c)}),e.YNc(39,A,2,2,"ion-select-option",12),e.qZA(),e.TgZ(40,"ion-buttons")(41,"ion-button",13),e.NdJ("click",function(){return i.goToPage(i.currentPage-1)}),e._uU(42,"Anterior"),e.qZA(),e.TgZ(43,"ion-button",13),e.NdJ("click",function(){return i.goToPage(i.currentPage+1)}),e._uU(44,"Siguiente"),e.qZA()()()),2&t&&(e.Q6J("translucent",!0),e.xp6(10),e.Q6J("ngModel",i.searchText),e.xp6(27),e.Q6J("ngForOf",i.displayedItems),e.xp6(1),e.Q6J("value",i.itemsPerPage),e.xp6(1),e.Q6J("ngForOf",i.itemsPerPageOptions),e.xp6(2),e.Q6J("disabled",1===i.currentPage),e.xp6(2),e.Q6J("disabled",i.currentPage===i.totalPages))},dependencies:[u.sg,u.O5,d.JJ,d.On,r.YG,r.Sm,r.wI,r.W2,r.jY,r.Gu,r.gu,r.pK,r.Ie,r.Q$,r.Nd,r.t9,r.n0,r.wd,r.sr,r.QI,r.j9],styles:['@charset "UTF-8";.custom-search-input[_ngcontent-%COMP%]{border:none;border-bottom:1px solid #000;border-radius:0;padding:.5rem;background-color:transparent;width:100%;font-size:1rem;color:#fff;outline:none}.custom-search-input[_ngcontent-%COMP%]:focus{border-bottom:2px solid #007bff}']}),a})()}];let J=(()=>{var n;class a{}return(n=a).\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[h.Bz.forChild(x),h.Bz]}),a})();var S=l(6472);let y=(()=>{var n;class a{}return(n=a).\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[u.ez,d.u5,r.Pc,J,S.JX]}),a})()}}]);