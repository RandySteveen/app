"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[3608],{3608:(q,f,l)=>{l.r(f),l.d(f,{OrderofeachcustomernewPageModule:()=>A});var m=l(6814),a=l(95),s=l(9843),h=l(4193),Z=l(5861),g=l(553),e=l(5879),w=l(9862);function T(i,c){if(1&i){const n=e.EpF();e.TgZ(0,"a",20),e.NdJ("click",function(){e.CHM(n);const t=e.oxw().$implicit,r=e.oxw();return e.KtG(r.routerdevuel(t.idpedido))}),e._UZ(1,"ion-icon",21),e.qZA()}}function U(i,c){if(1&i){const n=e.EpF();e.TgZ(0,"a",20),e.NdJ("click",function(){e.CHM(n);const t=e.oxw().$implicit,r=e.oxw();return e.KtG(r.deleteOrders(t.idpedido))}),e._UZ(1,"ion-icon",22),e.qZA()}}function v(i,c){if(1&i&&(e.TgZ(0,"ion-row"),e._UZ(1,"ion-col",13),e.TgZ(2,"ion-col",14),e._uU(3),e.qZA(),e.TgZ(4,"ion-col",14),e._uU(5),e.qZA(),e.TgZ(6,"ion-col",15),e._uU(7),e.qZA(),e.TgZ(8,"ion-col",14),e._uU(9),e.qZA(),e.TgZ(10,"ion-col",14),e._uU(11),e.qZA(),e.TgZ(12,"ion-col",14),e.YNc(13,T,2,0,"a",19),e.YNc(14,U,2,0,"a",19),e.qZA()()),2&i){const n=c.$implicit;e.xp6(3),e.Oqu(n.idpedido),e.xp6(2),e.Oqu(n.codcli),e.xp6(2),e.hij(" ",n.fecped," "),e.xp6(2),e.hij(" ",n.monnet," "),e.xp6(2),e.hij(" ","0"===n.estep?"Por Transmitir":"Transmitido"," "),e.xp6(2),e.Q6J("ngIf","0"===n.estped),e.xp6(1),e.Q6J("ngIf","0"===n.estped)}}const O=[{path:"",component:(()=>{var i;class c{constructor(o,t,r,d,p,u){this.http=o,this.fb=t,this.route=r,this.router=d,this.fb1=p,this.alertcontroller=u,this.searchText="",this.currentPage=1,this.itemsPerPageOptions=[5,10,20],this.itemsPerPage=10,this.displayedItems=[],this.items=[],this.montoTotal=0,this.FormData=this.fb.group({nomcli:new a.NI(""),codcli:new a.NI("")}),this.formDelete=this.fb1.group({idpedido:new a.NI("")})}ngOnInit(){this.viewData(),this.viewData2()}viewData(){this.idsuc=this.route.snapshot.paramMap.get("idsuc"),this.http.get(`${g.N.apiOrdersUrl}/specific/${this.idsuc}`).subscribe(o=>{this.items=o.orders,this.dato=o,this.idsuc=this.dato.orders[0].idsuc,this.idpedido=this.dato.orders[0].idpedido,this.loadDisplayedItems(),this.montoTotal=this.dato.orders.reduce((t,r)=>t+r.monnet,0).toFixed(2)})}viewData2(){this.idsuc=this.route.snapshot.paramMap.get("idsuc"),this.http.get(`${g.N.apiOrdersUrl}/new/client/${this.idsuc}`).subscribe(o=>{var t,r;this.info=o.infoCli,this.info&&this.info.length>0&&(this.FormData.patchValue({nomcli:this.info[0].nomcli,codcli:this.info[0].codcli}),null===(t=this.FormData.get("nomcli"))||void 0===t||t.disable(),null===(r=this.FormData.get("codcli"))||void 0===r||r.disable())})}onSearchInput(o){const t=o.target;null!=t.value&&(this.searchText=t.value,this.loadDisplayedItems())}loadDisplayedItems(){const o=(this.currentPage-1)*this.itemsPerPage;this.displayedItems=this.filteredItems.slice(o,o+this.itemsPerPage)}get filteredItems(){return this.items.filter(o=>o.codcli.toLowerCase().includes(this.searchText.toLowerCase()))}routerdevuel(o){this.router.navigate(["ordeslistglobal",this.idsuc,o])}deleteOrders(o){var t=this;return(0,Z.Z)(function*(){var r,p;null===(r=t.formDelete.get("idpedido"))||void 0===r||r.setValue(o),yield(yield t.alertcontroller.create({header:"Eliminar Pedido",message:"\xbfSeguro que quieres eliminar el pedido seleccionado?",buttons:[{text:"Cancelar",role:"cancel",cssClass:"secondary",handler:()=>{}},{text:"Eliminar",handler:(p=(0,Z.Z)(function*(){try{t.http.delete(`${g.N.apiOrdersUrl}/delete`,{body:{idpedido:o}}).subscribe(I=>{const _=t.items.findIndex(x=>x.idpedido===o);-1!==_&&(t.items.splice(_,1),window.location.reload())})}catch(u){console.error("Error al eliminar el pedido:",u)}}),function(){return p.apply(this,arguments)})}]})).present()})()}}return(i=c).\u0275fac=function(o){return new(o||i)(e.Y36(w.eN),e.Y36(a.qu),e.Y36(h.gz),e.Y36(h.F0),e.Y36(a.qu),e.Y36(s.Br))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-orderofeachcustomernew"]],decls:71,vars:7,consts:[[3,"translucent"],["scroll-y","true",3,"fullscreen"],["align","center"],["routerLink","/dashboard",2,"float","right","margin-right","30px"],["name","arrow-forward-outline","color","danger",2,"font-size","3em"],[3,"formGroup"],["position","floating"],["name","newspaper-outline"],["formControlName","codcli"],["name","document-text-outline"],["formControlName","nomcli"],["name","search-outline"],["placeholder","Buscar...",1,"custom-search-input",3,"ngModel","ngModelChange","input"],["size","1"],["size","1.5"],["size","2"],[4,"ngFor","ngForOf"],["name","cash-outline"],[3,"disabled","value"],[3,"click",4,"ngIf"],[3,"click"],["name","create-outline",2,"font-size","35px","color","greenyellow"],["name","trash-outline",2,"font-size","35px","color","red"]],template:function(o,t){1&o&&(e.TgZ(0,"ion-header",0)(1,"ion-toolbar")(2,"ion-title"),e._uU(3,"orderofeachcustomernew"),e.qZA()()(),e.TgZ(4,"ion-content",1),e._UZ(5,"br"),e.TgZ(6,"ion-title",2),e._uU(7,"Pedido General"),e.qZA(),e._UZ(8,"br")(9,"br"),e.TgZ(10,"ion-title",2),e._uU(11,"Datos del Cliente"),e.qZA(),e.TgZ(12,"a",3),e._UZ(13,"ion-icon",4),e.qZA(),e._UZ(14,"br")(15,"br"),e.TgZ(16,"form",5)(17,"ion-item")(18,"ion-label",6),e._UZ(19,"ion-icon",7),e._uU(20,".RIF"),e.qZA(),e._UZ(21,"ion-input",8),e.qZA(),e._UZ(22,"br"),e.TgZ(23,"ion-item")(24,"ion-label",6),e._UZ(25,"ion-icon",9),e._uU(26,".Razon Social"),e.qZA(),e._UZ(27,"ion-input",10),e.qZA(),e._UZ(28,"br"),e.qZA(),e.TgZ(29,"ion-item")(30,"ion-label",6),e._UZ(31,"ion-icon",11),e._uU(32,".Buscar"),e.qZA(),e.TgZ(33,"ion-input",12),e.NdJ("ngModelChange",function(d){return t.searchText=d})("input",function(d){return t.onSearchInput(d)}),e.qZA()(),e._UZ(34,"br")(35,"br"),e.TgZ(36,"ion-grid")(37,"ion-row")(38,"ion-col",13),e._UZ(39,"strong"),e.qZA(),e.TgZ(40,"ion-col",14)(41,"strong"),e._uU(42,"No"),e.qZA()(),e.TgZ(43,"ion-col",14)(44,"strong"),e._uU(45,"Codigo"),e.qZA()(),e.TgZ(46,"ion-col",15)(47,"strong"),e._uU(48,"Fecha"),e.qZA()(),e.TgZ(49,"ion-col",14)(50,"strong"),e._uU(51,"Saldo"),e.qZA()(),e.TgZ(52,"ion-col",14)(53,"strong"),e._uU(54,"Orden"),e.qZA()(),e.TgZ(55,"ion-col",14)(56,"strong"),e._uU(57,"Accion"),e.qZA()()(),e.YNc(58,v,15,7,"ion-row",16),e.qZA(),e.TgZ(59,"ion-grid")(60,"ion-row"),e._UZ(61,"ion-col",13)(62,"ion-col",14)(63,"ion-col",14)(64,"ion-col",15),e.TgZ(65,"ion-col",14)(66,"ion-item")(67,"ion-label",6),e._UZ(68,"ion-icon",17),e._uU(69,"Monto Total"),e.qZA(),e._UZ(70,"ion-input",18),e.qZA()()()()()),2&o&&(e.Q6J("translucent",!0),e.xp6(4),e.Q6J("fullscreen",!0),e.xp6(12),e.Q6J("formGroup",t.FormData),e.xp6(17),e.Q6J("ngModel",t.searchText),e.xp6(25),e.Q6J("ngForOf",t.displayedItems),e.xp6(12),e.Q6J("disabled",!0)("value",t.montoTotal))},dependencies:[m.sg,m.O5,a._Y,a.JJ,a.JL,a.On,s.wI,s.W2,s.jY,s.Gu,s.gu,s.pK,s.Ie,s.Q$,s.Nd,s.wd,s.sr,s.j9,s.Fo,h.rH,a.sg,a.u]}),c})()}];let P=(()=>{var i;class c{}return(i=c).\u0275fac=function(o){return new(o||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({imports:[h.Bz.forChild(O),h.Bz]}),c})(),A=(()=>{var i;class c{}return(i=c).\u0275fac=function(o){return new(o||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({imports:[m.ez,a.u5,s.Pc,P,a.UX]}),c})()}}]);