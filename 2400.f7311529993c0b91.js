"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[2400],{2400:(y,p,l)=>{l.r(p),l.d(p,{OldclientPageModule:()=>U});var u=l(6814),g=l(95),r=l(9843),m=l(4193),f=l(5861),h=l(6726);var P=l(7921),t=l(5879),Z=l(7076),O=l(9862),T=l(7584),C=l(9687);function v(n,a){if(1&n){const s=t.EpF();t.TgZ(0,"a",6),t.NdJ("click",function(){t.CHM(s);const o=t.oxw().$implicit,i=t.oxw();return t.KtG(i.order(o.idsuc))}),t._UZ(1,"ion-icon",18),t.qZA()}}function x(n,a){if(1&n){const s=t.EpF();t.TgZ(0,"ion-row")(1,"ion-col",4),t._uU(2),t.qZA(),t.TgZ(3,"ion-col",5),t._uU(4),t.qZA(),t.TgZ(5,"ion-col",7),t._uU(6),t.qZA(),t.TgZ(7,"ion-col",5),t._uU(8),t.qZA(),t.TgZ(9,"ion-col",5),t._uU(10),t.qZA(),t.TgZ(11,"ion-col",5),t._uU(12),t.qZA(),t.TgZ(13,"ion-col",5),t._uU(14),t.qZA(),t.TgZ(15,"ion-col",8)(16,"a")(17,"ion-icon",13),t.NdJ("click",function(){const i=t.CHM(s).$implicit,c=t.oxw();return t.KtG(c.editclient(i.idsuc))}),t.qZA()(),t.TgZ(18,"a")(19,"ion-icon",14),t.NdJ("click",function(){const i=t.CHM(s).$implicit,c=t.oxw();return t.KtG(c.newsite(i.codcli))}),t.qZA()(),t.YNc(20,v,2,0,"a",15),t.TgZ(21,"a")(22,"ion-icon",16),t.NdJ("click",function(){const i=t.CHM(s).$implicit,c=t.oxw();return t.KtG(c.invoice(i.codcli))}),t.qZA()(),t.TgZ(23,"a")(24,"ion-icon",17),t.NdJ("click",function(){const i=t.CHM(s).$implicit,c=t.oxw();return t.KtG(c.neworder(i.idsuc))}),t.qZA()()()()}if(2&n){const s=a.$implicit,e=a.index,o=t.oxw();t.xp6(2),t.Oqu((o.currentPage-1)*o.itemsPerPage+e+1),t.xp6(2),t.Oqu(s.codcli),t.xp6(2),t.Oqu(s.nomcli),t.xp6(2),t.hij(" ",s.cant_orders," "),t.xp6(2),t.hij(" ",s.cant_invoices," "),t.xp6(2),t.hij(" ",s.cant_notes," "),t.xp6(2),t.hij(" ",s.total_saldou," "),t.xp6(6),t.Q6J("ngIf","0"===o.status&&o.currentIdsucSet.has(s.idsuc))}}function I(n,a){if(1&n&&(t.TgZ(0,"ion-select-option",19),t._uU(1),t.qZA()),2&n){const s=a.$implicit;t.Q6J("value",s),t.xp6(1),t.hij(" ",s," ")}}const A=[{path:"",component:(()=>{var n;class a{constructor(e,o,i,c,d){this.loginService=e,this.http=o,this.RoutingClient=i,this.Router=c,this.dataSharingService=d,this.searchText="",this.items=[],this.currentPage=1,this.itemsPerPageOptions=[5,10,20],this.itemsPerPage=10,this.displayedItems=[],this.totalPages=1,this.searchTextControl=new g.NI,this.currentIdsucSet=new Set}ngOnInit(){var e=this;return(0,f.Z)(function*(){const o=yield e.loginService.getLoginInfo(),{cedusu:i}=(0,h.Z)(o);e.RoutingClient.codved$.pipe((0,P.O)([])).subscribe(c=>{e.viewData(),e.http.post(`https://orders.loagros.com//global/${i}`,c).subscribe(d=>{e.status=d.info[0].estped;for(const J of d.info)e.currentIdsucSet.add(J.idsuc)})})})()}viewData(){this.loginService.getLoginInfo().then(e=>{const{cedusu:o}=(0,h.Z)(e);this.RoutingClient.codved$.pipe((0,P.O)([])).subscribe(i=>{this.http.post(`https://clients.loagros.com//old/${o}`,i).subscribe(c=>{this.items=c.info,this.idsuc=this.items[0].idsuc,this.codcli=this.items[0].codcli,this.sortColumn("codcli"),this.loadDisplayedItems(),localStorage.setItem("storedClients",JSON.stringify(this.items))},c=>{const d=localStorage.getItem("storedClients");d&&(this.items=JSON.parse(d),this.sortColumn("codcli"),this.loadDisplayedItems())})})}),this.totalPages=Math.ceil(this.filteredItems.length/this.itemsPerPage),this.currentPage=1,this.loadDisplayedItems()}sortColumn(e){this.filteredItems.sort((o,i)=>o[e]<i[e]?-1:o[e]>i[e]?1:0),this.loadDisplayedItems()}loadDisplayedItems(){const e=(this.currentPage-1)*this.itemsPerPage;this.displayedItems=this.filteredItems.slice(e,e+this.itemsPerPage)}onPageChange(e){this.itemsPerPage=e.detail.value,this.totalPages=Math.ceil(this.filteredItems.length/this.itemsPerPage),this.currentPage=1,this.loadDisplayedItems()}goToPage(e){e>=1&&e<=this.totalPages&&(this.currentPage=e,this.loadDisplayedItems(),localStorage.setItem("storedClients",JSON.stringify(this.items)))}onSearchInput(e){const o=e.target;null!=o.value&&(this.searchText=o.value,this.loadDisplayedItems())}get filteredItems(){return this.items.filter(e=>e.codcli.toLowerCase().includes(this.searchText.toLowerCase())||e.nomcli.toLowerCase().includes(this.searchText.toLowerCase()))}editclient(e){this.Router.navigate(["oldclient-edit",e])}newsite(e){this.Router.navigate(["oldsitesclient",e])}neworder(e){this.Router.navigate(["oldordersclient",e])}order(e){this.Router.navigate(["orderofeachcustomerold",e])}invoice(e){this.Router.navigate(["invoice-data",e])}}return(n=a).\u0275fac=function(e){return new(e||n)(t.Y36(Z.F),t.Y36(O.eN),t.Y36(T.E),t.Y36(m.F0),t.Y36(C.u))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-oldclient"]],decls:47,vars:6,consts:[[1,"background"],["position","floating"],["name","search-outline"],["placeholder","Buscar...",1,"custom-search-input",3,"ngModel","ngModelChange","input"],["size","1"],["size","1.5","align","center"],[3,"click"],["size","2","align","center"],["size","1.5"],[4,"ngFor","ngForOf"],["color","success",2,"margin-left","20px",3,"value","ionChange"],["color","success",3,"value",4,"ngFor","ngForOf"],[3,"disabled","click"],["name","create-outline",2,"font-size","30px","color","greenyellow",3,"click"],["name","home-outline",2,"font-size","30px","color","rgb(247, 240, 240)",3,"click"],[3,"click",4,"ngIf"],["name","document-outline",2,"font-size","30px","color","rgb(255, 255, 255)",3,"click"],["name","cart-outline",2,"font-size","30px","color","orange",3,"click"],["name","bag-handle-outline",2,"font-size","30px","color","cyan"],["color","success",3,"value"]],template:function(e,o){1&e&&(t.TgZ(0,"ion-header")(1,"ion-toolbar")(2,"ion-title"),t._uU(3," Tabla con Paginaci\xf3n y Filtro "),t.qZA()()(),t._UZ(4,"br"),t.TgZ(5,"ion-content",0)(6,"ion-item")(7,"ion-label",1),t._UZ(8,"ion-icon",2),t._uU(9,".Buscar"),t.qZA(),t.TgZ(10,"ion-input",3),t.NdJ("ngModelChange",function(c){return o.searchText=c})("input",function(c){return o.onSearchInput(c)}),t.qZA()(),t._UZ(11,"br")(12,"br"),t.TgZ(13,"ion-grid")(14,"ion-row")(15,"ion-col",4)(16,"strong"),t._uU(17,"No"),t.qZA()(),t.TgZ(18,"ion-col",5)(19,"strong",6),t.NdJ("click",function(){return o.sortColumn("codcli")}),t._uU(20,"codcli"),t.qZA()(),t.TgZ(21,"ion-col",7)(22,"strong",6),t.NdJ("click",function(){return o.sortColumn("nomcli")}),t._uU(23,"Cliente"),t.qZA()(),t.TgZ(24,"ion-col",5)(25,"strong"),t._uU(26,"Pedidos"),t.qZA()(),t.TgZ(27,"ion-col",5)(28,"strong"),t._uU(29,"Factura"),t.qZA()(),t.TgZ(30,"ion-col",5)(31,"strong"),t._uU(32,"Nota"),t.qZA()(),t.TgZ(33,"ion-col",5)(34,"strong"),t._uU(35,"Saldo"),t.qZA()(),t.TgZ(36,"ion-col",8)(37,"strong"),t._uU(38,"Accion"),t.qZA()()(),t.YNc(39,x,25,8,"ion-row",9),t.qZA(),t.TgZ(40,"ion-select",10),t.NdJ("ionChange",function(c){return o.onPageChange(c)}),t.YNc(41,I,2,2,"ion-select-option",11),t.qZA(),t.TgZ(42,"ion-buttons")(43,"ion-button",12),t.NdJ("click",function(){return o.goToPage(o.currentPage-1)}),t._uU(44,"Anterior"),t.qZA(),t.TgZ(45,"ion-button",12),t.NdJ("click",function(){return o.goToPage(o.currentPage+1)}),t._uU(46,"Siguiente"),t.qZA()()()),2&e&&(t.xp6(10),t.Q6J("ngModel",o.searchText),t.xp6(29),t.Q6J("ngForOf",o.displayedItems),t.xp6(1),t.Q6J("value",o.itemsPerPage),t.xp6(1),t.Q6J("ngForOf",o.itemsPerPageOptions),t.xp6(2),t.Q6J("disabled",1===o.currentPage),t.xp6(2),t.Q6J("disabled",o.currentPage===o.totalPages))},dependencies:[u.sg,u.O5,g.JJ,g.On,r.YG,r.Sm,r.wI,r.W2,r.jY,r.Gu,r.gu,r.pK,r.Ie,r.Q$,r.Nd,r.t9,r.n0,r.wd,r.sr,r.QI,r.j9],styles:['@charset "UTF-8";ion-content[_ngcontent-%COMP%]   .background[_ngcontent-%COMP%]{background-image:url(fechars.5605a5052fc52a96.png)}.custom-modal[_ngcontent-%COMP%]   ion-header[_ngcontent-%COMP%]{background-color:#3de713}.custom-modal[_ngcontent-%COMP%]   ion-title[_ngcontent-%COMP%]{color:#fff}.custom-modal[_ngcontent-%COMP%]   ion-content[_ngcontent-%COMP%]{text-align:center;padding:20px}.custom-modal[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:18px;margin-bottom:20px}.custom-modal[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]{--border-radius: 10px;margin-bottom:10px}.custom-search-input[_ngcontent-%COMP%]{border:none;border-bottom:1px solid #000;border-radius:0;padding:.5rem;background-color:transparent;width:100%;font-size:1rem;color:#fff;outline:none}.custom-search-input[_ngcontent-%COMP%]:focus{border-bottom:2px solid #007bff}']}),a})()}];let b=(()=>{var n;class a{}return(n=a).\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[m.Bz.forChild(A),m.Bz]}),a})();var M=l(6472);let U=(()=>{var n;class a{}return(n=a).\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[u.ez,g.u5,r.Pc,b,M.JX]}),a})()}}]);