"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[9946],{9946:(I,m,r)=>{r.r(m),r.d(m,{InvoiceOldDetailsPageModule:()=>U});var u=r(6814),l=r(95),a=r(9843),g=r(4193),h=r(553),o=r(5879),p=r(9862);function Z(e,c){if(1&e&&(o.ynx(0),o._uU(1),o.BQk()),2&e){const s=o.oxw().$implicit;o.xp6(1),o.hij(" ","FAC"===s.codcta?"FACTURA":"DEV"===s.codcta?"DEVOLUCION":"DEB"===s.codcta?"DEBITO":"RET"===s.codcta?"RETENCION":"ABO"===s.codcta?"ABONO":""," ")}}function v(e,c){if(1&e&&(o.TgZ(0,"ion-row")(1,"ion-col",13),o._UZ(2,"strong"),o.qZA(),o.TgZ(3,"ion-col",14),o._uU(4),o.qZA(),o.TgZ(5,"ion-col",13),o._UZ(6,"strong"),o.qZA(),o.TgZ(7,"ion-col",14),o.YNc(8,Z,2,1,"ng-container",21),o.qZA(),o.TgZ(9,"ion-col",13),o._UZ(10,"strong"),o.qZA(),o.TgZ(11,"ion-col",14),o._uU(12),o.ALo(13,"date"),o.qZA(),o._UZ(14,"ion-col",13),o.TgZ(15,"ion-col",14),o._uU(16),o.qZA(),o.TgZ(17,"ion-col",13),o._UZ(18,"strong"),o.qZA(),o.TgZ(19,"ion-col",14),o._uU(20),o.qZA()()),2&e){const s=c.$implicit,i=o.oxw();o.xp6(4),o.Oqu(s.codcta),o.xp6(4),o.Q6J("ngIf",!i.shouldHideDeb(s)),o.xp6(4),o.Oqu(o.xi3(13,5,s.feccta,"dd/MM/yyyy")),o.xp6(4),o.Oqu(s.monddi),o.xp6(4),o.Oqu(s.monhdi)}}function f(e,c){if(1&e&&(o.TgZ(0,"ion-select-option",22),o._uU(1),o.qZA()),2&e){const s=c.$implicit;o.Q6J("value",s),o.xp6(1),o.hij(" ",s," ")}}const _=[{path:"",component:(()=>{var e;class c{constructor(i,t,n,d){this.route=i,this.http=t,this.router=n,this.fb=d,this.searchText="",this.items=[],this.currentPage=1,this.itemsPerPageOptions=[5,10,20],this.itemsPerPage=10,this.displayedItems=[],this.totalPages=1,this.monhdi=0,this.monddi=0,this.saldoTotal=0,this.FormData=this.fb.group({nomcli:new l.NI(""),codcli:new l.NI("")}),this.formData=this.fb.group({tipdoc:new l.NI(""),numdoc:new l.NI("")})}calcSaldo(i){return i.monddi-i.monhdi}ngOnInit(){this.viewData(),this.viewData2(),this.viewData3(),this.saldoTotal=this.displayedItems.reduce((i,t)=>i+this.calcSaldo(t),0)}viewData(){this.codcli=this.router.snapshot.paramMap.get("codcli"),this.codmov=this.router.snapshot.paramMap.get("codmov"),this.codfmv=this.router.snapshot.paramMap.get("codfmv"),this.http.get(`${h.N.apiInvoicesUrl}/payment/${this.codcli}/${this.codmov}/${this.codfmv}`).subscribe(i=>{var t,n;console.log(i),this.info=i.client,this.info&&this.info.length>0&&(this.FormData.patchValue({nomcli:this.info[0].nomcli,codcli:this.info[0].codcli}),null===(t=this.FormData.get("nomcli"))||void 0===t||t.disable(),null===(n=this.FormData.get("codcli"))||void 0===n||n.disable())})}viewData3(){this.codcli=this.router.snapshot.paramMap.get("codcli"),this.codmov=this.router.snapshot.paramMap.get("codmov"),this.codfmv=this.router.snapshot.paramMap.get("codfmv"),this.http.get(`${h.N.apiInvoicesUrl}/payment/${this.codcli}/${this.codmov}/${this.codfmv}`).subscribe(i=>{var t,n;console.log(i),this.info2=i.info,this.info2&&this.info2.length>0&&(this.formData.patchValue({tipdoc:this.info2[0].codfmv,numdoc:this.info2[0].codmov}),null===(t=this.formData.get("tipdoc"))||void 0===t||t.disable(),null===(n=this.formData.get("numdoc"))||void 0===n||n.disable())})}shouldHideDeb(i){return"DEB"===i.codcta&&0===i.monddi&&0===i.monhdi}calculateRest(){this.items.forEach(i=>{this.monhdi=i.monhdi,this.monddi=i.monddi})}viewData2(){this.codcli=this.router.snapshot.paramMap.get("codcli"),this.codmov=this.router.snapshot.paramMap.get("codmov"),this.codfmv=this.router.snapshot.paramMap.get("codfmv"),this.http.get(`${h.N.apiInvoicesUrl}/payment/${this.codcli}/${this.codmov}/${this.codfmv}`).subscribe(i=>{this.items=i.info,console.log(i),this.saldoTotal=this.items.reduce((t,n)=>t+(n.monddi-n.monhdi),0),this.loadDisplayedItems()})}sortColumn(i){this.filteredItems.sort((t,n)=>t[i]<n[i]?-1:t[i]>n[i]?1:0),this.loadDisplayedItems()}loadDisplayedItems(){const i=(this.currentPage-1)*this.itemsPerPage;this.displayedItems=this.filteredItems.slice(i,i+this.itemsPerPage)}onPageChange(i){this.itemsPerPage=i.detail.value,this.totalPages=Math.ceil(this.filteredItems.length/this.itemsPerPage),this.currentPage=1,this.loadDisplayedItems()}goToPage(i){i>=1&&i<=this.totalPages&&(this.currentPage=i,this.loadDisplayedItems(),localStorage.setItem("storedClients",JSON.stringify(this.items)))}get filteredItems(){return this.items.filter(i=>i.codcta.toLowerCase().includes(this.searchText.toLowerCase()))}routerdevueld(){this.codcli=this.router.snapshot.paramMap.get("codcli"),this.route.navigate(["invoice-data",this.codcli])}onSearchInput(i){const t=i.target;null!=t.value&&(this.searchText=t.value,this.loadDisplayedItems())}}return(e=c).\u0275fac=function(i){return new(i||e)(o.Y36(g.F0),o.Y36(p.eN),o.Y36(g.gz),o.Y36(l.qu))},e.\u0275cmp=o.Xpm({type:e,selectors:[["app-invoice-old-details"]],decls:100,vars:11,consts:[[3,"translucent"],["scroll-y","true"],["align","center"],[2,"float","right","margin-right","30px",3,"click"],["name","arrow-forward-outline","color","danger",2,"font-size","3em"],[3,"formGroup"],["position","floating"],["formControlName","codcli"],["formControlName","nomcli"],["formControlName","tipdoc",3,"value"],["formControlName","numdoc"],["name","search-outline"],["placeholder","Buscar...",1,"custom-search-input",3,"ngModel","ngModelChange","input"],["size","1"],["size","1","align","center"],[4,"ngFor","ngForOf"],["name","cash-outline"],["disabled","true",3,"value"],["color","success",2,"margin-left","20px",3,"value"],["color","success",3,"value",4,"ngFor","ngForOf"],[3,"disabled","click"],[4,"ngIf"],["color","success",3,"value"]],template:function(i,t){if(1&i&&(o.TgZ(0,"ion-header",0)(1,"ion-toolbar")(2,"ion-title"),o._uU(3,"invoiceOldDetails"),o.qZA()()(),o.TgZ(4,"ion-content",1),o._UZ(5,"br")(6,"br"),o.TgZ(7,"ion-title",2),o._uU(8,"Movimientos de Pagos"),o.qZA(),o.TgZ(9,"a",3),o.NdJ("click",function(){return t.routerdevueld()}),o._UZ(10,"ion-icon",4),o.qZA(),o._UZ(11,"br")(12,"br")(13,"br"),o.TgZ(14,"form",5)(15,"ion-item")(16,"ion-label",6),o._uU(17,"RIF"),o.qZA(),o._UZ(18,"ion-input",7),o.qZA(),o._UZ(19,"br"),o.TgZ(20,"ion-item")(21,"ion-label",6),o._uU(22,"Razon Social"),o.qZA(),o._UZ(23,"ion-input",8),o.qZA()(),o.TgZ(24,"form",5),o._UZ(25,"br"),o.TgZ(26,"ion-item")(27,"ion-label",6),o._uU(28,"Tipo de Documento"),o.qZA(),o._UZ(29,"ion-input",9),o.qZA(),o._UZ(30,"br"),o.TgZ(31,"ion-item")(32,"ion-label",6),o._uU(33,"Numero de Documento"),o.qZA(),o._UZ(34,"ion-input",10),o.qZA()(),o._UZ(35,"br")(36,"br"),o.TgZ(37,"ion-item")(38,"ion-label",6),o._UZ(39,"ion-icon",11),o._uU(40,".Buscar"),o.qZA(),o.TgZ(41,"ion-input",12),o.NdJ("ngModelChange",function(d){return t.searchText=d})("input",function(d){return t.onSearchInput(d)}),o.qZA()(),o._UZ(42,"br")(43,"br"),o.TgZ(44,"ion-grid")(45,"ion-row")(46,"ion-col",13),o._UZ(47,"strong"),o.qZA(),o.TgZ(48,"ion-col",14)(49,"strong"),o._uU(50,"Codigo"),o.qZA()(),o.TgZ(51,"ion-col",13),o._UZ(52,"strong"),o.qZA(),o.TgZ(53,"ion-col",14)(54,"strong"),o._uU(55,"Detalles"),o.qZA()(),o.TgZ(56,"ion-col",13),o._UZ(57,"strong"),o.qZA(),o.TgZ(58,"ion-col",14)(59,"strong"),o._uU(60,"Fecha"),o.qZA()(),o.TgZ(61,"ion-col",13),o._UZ(62,"strong"),o.qZA(),o.TgZ(63,"ion-col",13)(64,"strong"),o._uU(65,"Debe Divisas"),o.qZA()(),o.TgZ(66,"ion-col",13),o._UZ(67,"strong"),o.qZA(),o.TgZ(68,"ion-col",13)(69,"strong"),o._uU(70,"Haber Divisas"),o.qZA()()(),o.YNc(71,v,21,8,"ion-row",15),o.qZA(),o._UZ(72,"br")(73,"br"),o.TgZ(74,"ion-grid")(75,"ion-row")(76,"ion-col",13),o._UZ(77,"strong"),o.qZA(),o._UZ(78,"ion-col",14),o.TgZ(79,"ion-col",13),o._UZ(80,"strong"),o.qZA(),o._UZ(81,"ion-col",14),o.TgZ(82,"ion-col",13),o._UZ(83,"strong"),o.qZA(),o._UZ(84,"ion-col",14),o.TgZ(85,"ion-col",13),o._UZ(86,"strong"),o.qZA(),o.TgZ(87,"ion-col",13)(88,"ion-item")(89,"ion-label",6),o._UZ(90,"ion-icon",16),o._uU(91," Saldo"),o.qZA(),o._UZ(92,"ion-input",17),o.qZA()()()(),o.TgZ(93,"ion-select",18),o.YNc(94,f,2,2,"ion-select-option",19),o.qZA(),o.TgZ(95,"ion-buttons")(96,"ion-button",20),o.NdJ("click",function(){return t.goToPage(t.currentPage-1)}),o._uU(97,"Anterior"),o.qZA(),o.TgZ(98,"ion-button",20),o.NdJ("click",function(){return t.goToPage(t.currentPage+1)}),o._uU(99,"Siguiente"),o.qZA()()()),2&i){let n;o.Q6J("translucent",!0),o.xp6(14),o.Q6J("formGroup",t.FormData),o.xp6(10),o.Q6J("formGroup",t.formData),o.xp6(5),o.Q6J("value","01"===(null==(n=t.formData.get("tipdoc"))?null:n.value)?"Factura":"05"===(null==(n=t.formData.get("tipdoc"))?null:n.value)?"Nota":""),o.xp6(12),o.Q6J("ngModel",t.searchText),o.xp6(30),o.Q6J("ngForOf",t.displayedItems),o.xp6(21),o.Q6J("value",t.saldoTotal.toFixed(2)),o.xp6(1),o.Q6J("value",t.itemsPerPage),o.xp6(1),o.Q6J("ngForOf",t.itemsPerPageOptions),o.xp6(2),o.Q6J("disabled",1===t.currentPage),o.xp6(2),o.Q6J("disabled",t.currentPage===t.totalPages)}},dependencies:[u.sg,u.O5,l._Y,l.JJ,l.JL,l.On,a.YG,a.Sm,a.wI,a.W2,a.jY,a.Gu,a.gu,a.pK,a.Ie,a.Q$,a.Nd,a.t9,a.n0,a.wd,a.sr,a.QI,a.j9,l.sg,l.u,u.uU]}),c})()}];let T=(()=>{var e;class c{}return(e=c).\u0275fac=function(i){return new(i||e)},e.\u0275mod=o.oAB({type:e}),e.\u0275inj=o.cJS({imports:[g.Bz.forChild(_),g.Bz]}),c})(),U=(()=>{var e;class c{}return(e=c).\u0275fac=function(i){return new(i||e)},e.\u0275mod=o.oAB({type:e}),e.\u0275inj=o.cJS({imports:[u.ez,l.u5,a.Pc,T,l.UX]}),c})()}}]);