"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[4730],{4730:(F,v,c)=>{c.r(v),c.d(v,{OrdeseditglobalPageModule:()=>J});var Z=c(6814),l=c(95),d=c(9843),h=c(4193),g=c(5861),f=c(553),e=c(5879),T=c(9862),U=c(7718),A=c(2014);function D(i,r){if(1&i&&(e.TgZ(0,"ion-select-option",34),e._uU(1),e.qZA()),2&i){const n=r.$implicit;e.Q6J("value",n.cod_departamento),e.xp6(1),e.hij(" ",n.des_departamento," ")}}function O(i,r){if(1&i&&(e.TgZ(0,"ion-select-option",34),e._uU(1),e.qZA()),2&i){const n=r.$implicit;e.Q6J("value",n.cod_grupo),e.xp6(1),e.hij(" ",n.des_grupo," ")}}function S(i,r){if(1&i&&(e.TgZ(0,"ion-select-option",34),e._uU(1),e.qZA()),2&i){const n=r.$implicit;e.Q6J("value",n.cod_subgru),e.xp6(1),e.hij(" ",n.des_subgru," ")}}function C(i,r){if(1&i&&(e.TgZ(0,"ion-select-option",34),e._uU(1),e.qZA()),2&i){const n=r.$implicit;e.Q6J("value",n.cod_marca),e.xp6(1),e.hij(" ",n.des_marca," ")}}function q(i,r){if(1&i&&(e.TgZ(0,"div",39),e._uU(1),e.qZA()),2&i){const n=e.oxw().$implicit;e.xp6(1),e.hij(" El producto ",n.codart," ya ha sido seleccionado. ")}}function N(i,r){if(1&i){const n=e.EpF();e.TgZ(0,"ion-row")(1,"ion-col",28),e._uU(2),e.qZA(),e.TgZ(3,"ion-col",29),e._uU(4),e.qZA(),e.TgZ(5,"ion-col",30),e._uU(6),e.qZA(),e.TgZ(7,"ion-col",29),e._uU(8),e.qZA(),e.TgZ(9,"ion-col",29)(10,"ion-input",35),e.NdJ("keypress",function(o){e.CHM(n);const a=e.oxw();return e.KtG(a.validateNumber(o))})("input",function(o){const s=e.CHM(n).$implicit,u=e.oxw();return e.KtG(u.updateCantidad(s,o))}),e.qZA()(),e.TgZ(11,"ion-col",29),e._uU(12),e.qZA(),e.TgZ(13,"ion-col",29),e._uU(14),e.qZA(),e.TgZ(15,"ion-col",29)(16,"a",36),e.NdJ("click",function(){const a=e.CHM(n).$implicit,s=e.oxw();return e.KtG(s.toggleSelection(a))}),e._UZ(17,"ion-icon",37),e.qZA()(),e.YNc(18,q,2,1,"div",38),e.qZA()}if(2&i){const n=r.$implicit,t=r.index,o=e.oxw();e.xp6(2),e.Oqu((o.currentPage-1)*o.itemsPerPage+t+1),e.xp6(2),e.hij(" ",n.codart," "),e.xp6(2),e.hij(" ",n.desart," "),e.xp6(2),e.hij(" ",n.exialm," "),e.xp6(4),e.hij(" ",n.preve1," "),e.xp6(2),e.hij(" ",n.preve3," "),e.xp6(3),e.Udp("color",n.seleccionado?"red":"green"),e.xp6(1),e.Q6J("ngIf",n.showProductSelectedMessage)}}function x(i,r){if(1&i&&(e.TgZ(0,"ion-select-option",34),e._uU(1),e.qZA()),2&i){const n=r.$implicit;e.Q6J("value",n),e.xp6(1),e.hij(" ",n," ")}}const I=[{path:"",component:(()=>{var i;class r{constructor(t,o,a,s,u,p){this.http=t,this.router=o,this.route=a,this.fb=s,this.dataSharingService=u,this.storage=p,this.searchText="",this.items=[],this.currentPage=1,this.itemsPerPageOptions=[5,10,20],this.itemsPerPage=10,this.displayedItems=[],this.totalPages=1,this.contador=0,this.ionSelectsEnabled=!0,this.showProductSelectedMessage=!1,this.selectedProducts=new Set,this.dataLoaded=!1,this.infopres=[],this.infomar=[],this.infocar=[],this.infosub=[],this.infogrup=[],this.infoDep=[],this.infoCli=[],this.FormData=this.fb.group({departamento:new l.NI(""),grupo:new l.NI(""),subgrupo:new l.NI(""),categoria:new l.NI(""),marca:new l.NI(""),presentacion:new l.NI(""),nomcli:new l.NI(""),codcli:new l.NI(""),dirsed:new l.NI(""),dessed:new l.NI("")}),this.initStorage()}get depa(){return this.FormData.get("departamento")}get gru(){return this.FormData.get("grupo")}get subgru(){return this.FormData.get("subgrupo")}get categ(){return this.FormData.get("categoria")}get marca(){return this.FormData.get("marca")}get present(){return this.FormData.get("presentacion")}validateNumber(t){const o=String.fromCharCode(t.which);/[0-9]/.test(o)||t.preventDefault()}initStorage(){var t=this;return(0,g.Z)(function*(){yield t.storage.create()})()}ViewData(){var t=this;return(0,g.Z)(function*(){t.http.get(`${f.N.APIURL}/filter`).subscribe(o=>{t.infoDep=o.infoDep,t.infogrup=o.infogrup,t.infosub=o.infosub,t.infocar=o.infocar,t.infomar=o.infomar,t.infopres=o.infopres,t.storage.set("form_order_data",o)})})()}onSearchInput(t){const o=t.target;null!=o.value&&(this.searchText=o.value,this.loadDisplayedItems())}updateCantidad(t,o){t.Cantidad=o.target.value}get filteredItems(){return this.items.filter(t=>t.desart.toLowerCase().includes(this.searchText.toLowerCase())||t.codart.toLowerCase().includes(this.searchText.toLowerCase()))}onPageChange(t){this.itemsPerPage=t.detail.value,this.totalPages=Math.ceil(this.filteredItems.length/this.itemsPerPage),this.currentPage=1,this.loadDisplayedItems(),localStorage.setItem("storedClients",JSON.stringify(this.items))}sortColumn(t){this.filteredItems.sort((o,a)=>o[t]<a[t]?-1:o[t]>a[t]?1:0),this.loadDisplayedItems()}loadDisplayedItems(){const t=(this.currentPage-1)*this.itemsPerPage;this.displayedItems=this.filteredItems.slice(t,t+this.itemsPerPage),this.totalPages=Math.ceil(this.filteredItems.length/this.itemsPerPage)}goToPage(t){t>=1&&t<=this.totalPages&&(this.currentPage=t,this.loadDisplayedItems(),localStorage.setItem("storedClients",JSON.stringify(this.items)))}listorder(){var t=this;return(0,g.Z)(function*(){const o=[...t.selectedProducts];t.dataSharingService.enviarDatosSeleccionados(o),t.router.navigate(["ordeslistglobal",t.idsuc,t.idpedido]),t.dataSharingService.setContador(t.contador)})()}ngOnInit(){var t=this;return(0,g.Z)(function*(){t.ionSelectsEnabled=!1,t.dataSharingService.getDatosSeleccionados().forEach(a=>{t.selectedProducts.add(a)}),t.contador=t.selectedProducts.size,t.dataLoaded||(t.ViewData2(),t.ViewData(),t.dataLoaded=!0)})()}ViewData2(){var t=this;return(0,g.Z)(function*(){t.idsuc=t.route.snapshot.paramMap.get("idsuc"),t.idpedido=t.route.snapshot.paramMap.get("idpedido"),t.http.get(`${f.N.apiOrdersUrl}/list/${t.idsuc}/${t.idpedido}`).subscribe(o=>{var a,s,u,p,m,_,b,P;t.info=o.infoUser,t.info&&t.info.length>0&&(t.FormData.patchValue({nomcli:null===(a=t.info[0])||void 0===a?void 0:a.nomcli,codcli:null===(s=t.info[0])||void 0===s?void 0:s.codcli,dirsed:null===(u=t.info[0])||void 0===u?void 0:u.dirsed,dessed:null===(p=t.info[0])||void 0===p?void 0:p.dessed}),null===(m=t.FormData.get("nomcli"))||void 0===m||m.disable(),null===(_=t.FormData.get("codcli"))||void 0===_||_.disable(),null===(b=t.FormData.get("dirsed"))||void 0===b||b.disable(),null===(P=t.FormData.get("dessed"))||void 0===P||P.disable(),t.items.push(...o.info),t.contador=t.items.length,t.storage.set(`_data_${t.idsuc}`,t.info))})})()}getData(){var t=this;return(0,g.Z)(function*(){t.selectedProducts=new Set,t.http.post(`${f.N.APIURL}/found/filter`,t.FormData.value).subscribe(o=>{t.items=o.info,t.loadDisplayedItems();const a=t.items.filter(_=>_.seleccionado),p=[...t.dataSharingService.getDatosSeleccionados(),...a],m=[...t.selectedProducts];t.dataSharingService.enviarDatosSeleccionados(m),t.storage.set("filter_order_data",p)})})()}clearSelections(){var t,o,a,s;this.ionSelectsEnabled=!0,null===(t=this.FormData.get("departamento"))||void 0===t||t.setValue(null),null===(o=this.FormData.get("grupo"))||void 0===o||o.setValue(null),null===(a=this.FormData.get("subgrupo"))||void 0===a||a.setValue(null),null===(s=this.FormData.get("marca"))||void 0===s||s.setValue(null)}toggleSelection(t){var o=this;return(0,g.Z)(function*(){if(o.selectedProducts.has(t)){const a=[...o.selectedProducts].find(s=>s.codart===t.codart);a&&(a.Cantidad=t.Cantidad,0===t.Cantidad&&(o.selectedProducts.delete(a),t.seleccionado=!1,o.contador-=1))}else t.seleccionado=!0,t.Cantidad=1,o.selectedProducts.add(t),o.contador+=1})()}}return(i=r).\u0275fac=function(t){return new(t||i)(e.Y36(T.eN),e.Y36(h.F0),e.Y36(h.gz),e.Y36(l.qu),e.Y36(U.A),e.Y36(A.K))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-ordeseditglobal"]],decls:125,vars:18,consts:[[3,"translucent"],["scroll-y","true",3,"fullscreen"],["align","center"],[3,"formGroup"],["position","floating"],["name","newspaper-outline"],["formControlName","codcli"],["name","document-text-outline"],["formControlName","nomcli"],["name","airplane-outline"],["formControlName","dirsed"],["name","storefront-outline"],["formControlName","dessed"],["color","success",2,"width","25%","margin-left","20px",3,"click"],["name","search-outline"],["color","danger",2,"float","right","width","25%","margin-right","20px",3,"click"],["name","trash-outline"],["formControlName","departamento",3,"disabled"],[3,"value",4,"ngFor","ngForOf"],["name","people-outline"],["formControlName","grupo",3,"disabled"],["name","pie-chart-outline"],["formControlName","subgrupo",3,"disabled"],["name","nuclear-outline"],["formControlName","marca",3,"disabled"],["color","primary",2,"background","transparent","width","10%","height","6%","float","right","margin-right","20px","margin-top","44px",3,"click"],["name","cart-outline",2,"font-size","40px"],["placeholder","Buscar...",1,"custom-search-input",3,"ngModel","ngModelChange","input"],["size","1"],["size","1.5"],["size","2"],[4,"ngFor","ngForOf"],[3,"value","ionChange"],[3,"disabled","click"],[3,"value"],["placeholder","Cantidad","color","success",3,"keypress","input"],[3,"click"],["name","cart-outline",2,"font-size","25px"],["class","product-selected-message",4,"ngIf"],[1,"product-selected-message"]],template:function(t,o){1&t&&(e.TgZ(0,"ion-header",0)(1,"ion-toolbar")(2,"ion-title"),e._uU(3,"ordersesitglobal"),e.qZA()()(),e.TgZ(4,"ion-content",1),e._UZ(5,"br"),e.TgZ(6,"ion-title",2),e._uU(7,"Editar Pedido"),e.qZA(),e._UZ(8,"br")(9,"br"),e.TgZ(10,"ion-title",2),e._uU(11,"Agregar Nuevo Pedido"),e.qZA(),e._UZ(12,"br")(13,"br"),e.TgZ(14,"form",3)(15,"ion-item")(16,"ion-label",4),e._UZ(17,"ion-icon",5),e._uU(18,".RIF"),e.qZA(),e._UZ(19,"ion-input",6),e.qZA(),e._UZ(20,"br"),e.TgZ(21,"ion-item")(22,"ion-label",4),e._UZ(23,"ion-icon",7),e._uU(24,".Razon Social"),e.qZA(),e._UZ(25,"ion-input",8),e.qZA(),e._UZ(26,"br"),e.TgZ(27,"ion-item")(28,"ion-label",4),e._UZ(29,"ion-icon",9),e._uU(30,".Direccion de Despacho"),e.qZA(),e._UZ(31,"ion-input",10),e.qZA(),e._UZ(32,"br"),e.TgZ(33,"ion-item")(34,"ion-label",4),e._UZ(35,"ion-icon",11),e._uU(36,".Descripcion de Sucursal"),e.qZA(),e._UZ(37,"ion-input",12),e.qZA(),e._UZ(38,"br")(39,"br"),e.TgZ(40,"ion-title",2),e._uU(41,"Seleccione sus Productos"),e.qZA(),e._UZ(42,"br"),e.TgZ(43,"ion-button",13),e.NdJ("click",function(){return o.getData()}),e._UZ(44,"ion-icon",14),e._uU(45,".Buscar"),e.qZA(),e.TgZ(46,"ion-button",15),e.NdJ("click",function(){return o.clearSelections()}),e._UZ(47,"ion-icon",16),e._uU(48,".Limpiar\n"),e.qZA(),e._UZ(49,"br")(50,"br"),e.TgZ(51,"ion-item")(52,"ion-label",4),e._uU(53,".Departamento"),e.qZA(),e.TgZ(54,"ion-select",17),e.YNc(55,D,2,2,"ion-select-option",18),e.qZA()(),e._UZ(56,"br"),e.TgZ(57,"ion-item")(58,"ion-label",4),e._UZ(59,"ion-icon",19),e._uU(60,".Grupo"),e.qZA(),e.TgZ(61,"ion-select",20),e.YNc(62,O,2,2,"ion-select-option",18),e.qZA()(),e._UZ(63,"br"),e.TgZ(64,"ion-item")(65,"ion-label",4),e._UZ(66,"ion-icon",21),e._uU(67,".Sub-Grupo"),e.qZA(),e.TgZ(68,"ion-select",22),e.YNc(69,S,2,2,"ion-select-option",18),e.qZA()(),e._UZ(70,"br"),e.TgZ(71,"ion-item")(72,"ion-label",4),e._UZ(73,"ion-icon",23),e._uU(74,".Marca"),e.qZA(),e.TgZ(75,"ion-select",24),e.YNc(76,C,2,2,"ion-select-option",18),e.qZA()(),e._UZ(77,"br")(78,"br"),e.qZA(),e.TgZ(79,"ion-button",25),e.NdJ("click",function(){return o.listorder()}),e._UZ(80,"ion-icon",26),e._uU(81),e.qZA(),e._UZ(82,"br")(83,"br"),e.TgZ(84,"ion-item")(85,"ion-label",4),e._UZ(86,"ion-icon",14),e._uU(87,".Buscar"),e.qZA(),e.TgZ(88,"ion-input",27),e.NdJ("ngModelChange",function(s){return o.searchText=s})("input",function(s){return o.onSearchInput(s)}),e.qZA()(),e._UZ(89,"br")(90,"br"),e.TgZ(91,"ion-grid")(92,"ion-row")(93,"ion-col",28)(94,"strong"),e._uU(95,"No"),e.qZA()(),e.TgZ(96,"ion-col",29)(97,"strong"),e._uU(98,"Codigo"),e.qZA()(),e.TgZ(99,"ion-col",30)(100,"strong"),e._uU(101,"Producto"),e.qZA()(),e.TgZ(102,"ion-col",29)(103,"strong"),e._uU(104,"Existencia"),e.qZA()(),e.TgZ(105,"ion-col",29)(106,"strong"),e._uU(107,"Cantidad"),e.qZA()(),e.TgZ(108,"ion-col",29)(109,"strong"),e._uU(110,"Precio(1)"),e.qZA()(),e.TgZ(111,"ion-col",29)(112,"strong"),e._uU(113,"Precio(2)"),e.qZA()(),e.TgZ(114,"ion-col",29)(115,"strong"),e._uU(116,"ADD"),e.qZA()()(),e.YNc(117,N,19,9,"ion-row",31),e.qZA(),e.TgZ(118,"ion-select",32),e.NdJ("ionChange",function(s){return o.onPageChange(s)}),e.YNc(119,x,2,2,"ion-select-option",18),e.qZA(),e.TgZ(120,"ion-buttons")(121,"ion-button",33),e.NdJ("click",function(){return o.goToPage(o.currentPage-1)}),e._uU(122,"Anterior"),e.qZA(),e.TgZ(123,"ion-button",33),e.NdJ("click",function(){return o.goToPage(o.currentPage+1)}),e._uU(124,"Siguiente"),e.qZA()()()),2&t&&(e.Q6J("translucent",!0),e.xp6(4),e.Q6J("fullscreen",!0),e.xp6(10),e.Q6J("formGroup",o.FormData),e.xp6(40),e.Q6J("disabled",!o.ionSelectsEnabled),e.xp6(1),e.Q6J("ngForOf",o.infoDep),e.xp6(6),e.Q6J("disabled",!o.ionSelectsEnabled),e.xp6(1),e.Q6J("ngForOf",o.infogrup),e.xp6(6),e.Q6J("disabled",!o.ionSelectsEnabled),e.xp6(1),e.Q6J("ngForOf",o.infosub),e.xp6(6),e.Q6J("disabled",!o.ionSelectsEnabled),e.xp6(1),e.Q6J("ngForOf",o.infomar),e.xp6(5),e.Oqu(o.contador),e.xp6(7),e.Q6J("ngModel",o.searchText),e.xp6(29),e.Q6J("ngForOf",o.displayedItems),e.xp6(1),e.Q6J("value",o.itemsPerPage),e.xp6(1),e.Q6J("ngForOf",o.itemsPerPageOptions),e.xp6(2),e.Q6J("disabled",1===o.currentPage),e.xp6(2),e.Q6J("disabled",o.currentPage===o.totalPages))},dependencies:[Z.sg,Z.O5,l._Y,l.JJ,l.JL,l.On,d.YG,d.Sm,d.wI,d.W2,d.jY,d.Gu,d.gu,d.pK,d.Ie,d.Q$,d.Nd,d.t9,d.n0,d.wd,d.sr,d.QI,d.j9,l.sg,l.u]}),r})()}];let w=(()=>{var i;class r{}return(i=r).\u0275fac=function(t){return new(t||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({imports:[h.Bz.forChild(I),h.Bz]}),r})(),J=(()=>{var i;class r{}return(i=r).\u0275fac=function(t){return new(t||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({imports:[Z.ez,l.u5,d.Pc,w,l.UX]}),r})()}}]);