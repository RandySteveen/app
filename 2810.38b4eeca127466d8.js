"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[2810],{2810:(q,f,c)=>{c.r(f),c.d(f,{OrderofeachcustomeroldPageModule:()=>x});var m=c(6814),a=c(95),n=c(9843),h=c(4193),Z=c(5861),g=c(553),e=c(5879),T=c(9862);function U(i,l){if(1&i){const r=e.EpF();e.TgZ(0,"a",20),e.NdJ("click",function(){e.CHM(r);const o=e.oxw(2);return e.KtG(o.routeredit())}),e._UZ(1,"ion-icon",21),e.qZA()}}function v(i,l){if(1&i){const r=e.EpF();e.TgZ(0,"a",20),e.NdJ("click",function(){e.CHM(r);const o=e.oxw().$implicit,s=e.oxw();return e.KtG(s.deleteOrders(o.idpedido))}),e._UZ(1,"ion-icon",22),e.qZA()}}function P(i,l){if(1&i&&(e.TgZ(0,"ion-row"),e._UZ(1,"ion-col",13),e.TgZ(2,"ion-col",14),e._uU(3),e.qZA(),e.TgZ(4,"ion-col",14),e._uU(5),e.qZA(),e.TgZ(6,"ion-col",15),e._uU(7),e.qZA(),e.TgZ(8,"ion-col",14),e._uU(9),e.qZA(),e.TgZ(10,"ion-col",14),e._uU(11),e.qZA(),e.TgZ(12,"ion-col",14),e.YNc(13,U,2,0,"a",19),e.YNc(14,v,2,0,"a",19),e.qZA()()),2&i){const r=l.$implicit;e.xp6(3),e.hij(" ",r.idpedido," "),e.xp6(2),e.hij(" ",r.codcli," "),e.xp6(2),e.hij(" ",r.fecped," "),e.xp6(2),e.hij(" ",r.monnet," "),e.xp6(2),e.hij(" ","0"===r.estped?"Por Transmitir":"Transmitido"," "),e.xp6(2),e.Q6J("ngIf","0"===r.estped),e.xp6(1),e.Q6J("ngIf","0"===r.estped)}}const A=[{path:"",component:(()=>{var i;class l{constructor(t,o,s,d,p,u){this.http=t,this.fb=o,this.route=s,this.router=d,this.alertcontroller=p,this.fb1=u,this.searchText="",this.currentPage=1,this.itemsPerPageOptions=[5,10,20],this.itemsPerPage=10,this.displayedItems=[],this.items=[],this.montoTotal=0,this.FormData=this.fb.group({nomcli:new a.NI(""),codcli:new a.NI("")}),this.formDelete=this.fb1.group({idpedido:new a.NI("")})}ngOnInit(){this.viewData(),this.viewData2()}viewData2(){this.idsuc=this.route.snapshot.paramMap.get("idsuc"),this.http.get(`${g.N.apiOrdersUrl}/specific/${this.idsuc}`).subscribe(t=>{this.items=t.orders,this.dato=t,this.idpedido=this.dato.orders[0].idpedido,this.idsuc=this.dato.orders[0].idsuc,this.loadDisplayedItems(),this.montoTotal=this.dato.orders.reduce((o,s)=>o+s.monnet,0).toFixed(2)})}viewData(){this.idsuc=this.route.snapshot.paramMap.get("idsuc"),this.http.get(`${g.N.apiOrdersUrl}/client/${this.idsuc}`).subscribe(t=>{var o,s;this.info=t.infoCli,this.info&&this.info.length>0&&(this.FormData.patchValue({nomcli:this.info[0].nomcli,codcli:this.info[0].codcli}),null===(o=this.FormData.get("nomcli"))||void 0===o||o.disable(),null===(s=this.FormData.get("codcli"))||void 0===s||s.disable())})}onSearchInput(t){const o=t.target;null!=o.value&&(this.searchText=o.value,this.loadDisplayedItems())}loadDisplayedItems(){const t=(this.currentPage-1)*this.itemsPerPage;this.displayedItems=this.filteredItems.slice(t,t+this.itemsPerPage)}get filteredItems(){return this.items.filter(t=>t.codcli.toLowerCase().includes(this.searchText.toLowerCase()))}routeredit(){this.router.navigate(["ordeslistglobal",this.idsuc,this.idpedido])}deleteOrders(t){var o=this;return(0,Z.Z)(function*(){var s,p;null===(s=o.formDelete.get("idpedido"))||void 0===s||s.setValue(t),yield(yield o.alertcontroller.create({header:"Eliminar Pedido",message:"\xbfSeguro que quieres eliminar el pedido seleccionado?",buttons:[{text:"Cancelar",role:"cancel",cssClass:"secondary",handler:()=>{}},{text:"Eliminar",handler:(p=(0,Z.Z)(function*(){try{o.http.delete(`${g.N.apiOrdersUrl}/delete`,{body:{idpedido:t}}).subscribe(I=>{const _=o.items.findIndex(b=>b.idpedido===t);-1!==_&&(o.items.splice(_,1),window.location.reload())})}catch(u){console.error("Error al eliminar el pedido:",u)}}),function(){return p.apply(this,arguments)})}]})).present()})()}}return(i=l).\u0275fac=function(t){return new(t||i)(e.Y36(T.eN),e.Y36(a.qu),e.Y36(h.gz),e.Y36(h.F0),e.Y36(n.Br),e.Y36(a.qu))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-orderofeachcustomerold"]],decls:71,vars:7,consts:[[3,"translucent"],["scroll-y","true",3,"fullscreen"],["align","center"],["routerLink","/dashboard",2,"float","right","margin-right","30px"],["name","arrow-forward-outline","color","danger",2,"font-size","3em"],[3,"formGroup"],["position","floating"],["name","newspaper-outline"],["formControlName","codcli"],["name","document-text-outline"],["formControlName","nomcli"],["name","search-outline"],["placeholder","Buscar...",1,"custom-search-input",3,"ngModel","ngModelChange","input"],["size","1"],["size","1.5"],["size","2"],[4,"ngFor","ngForOf"],["name","cash-outline"],[3,"disabled","value"],[3,"click",4,"ngIf"],[3,"click"],["name","create-outline",2,"font-size","35px","color","greenyellow"],["name","trash-outline",2,"font-size","35px","color","rgb(216, 15, 15)"]],template:function(t,o){1&t&&(e.TgZ(0,"ion-header",0)(1,"ion-toolbar")(2,"ion-title"),e._uU(3,"orderofeachcustomerold"),e.qZA()()(),e.TgZ(4,"ion-content",1),e._UZ(5,"br"),e.TgZ(6,"ion-title",2),e._uU(7,"Pedido General"),e.qZA(),e._UZ(8,"br")(9,"br"),e.TgZ(10,"ion-title",2),e._uU(11,"Datos del Cliente"),e.qZA(),e.TgZ(12,"a",3),e._UZ(13,"ion-icon",4),e.qZA(),e._UZ(14,"br")(15,"br"),e.TgZ(16,"form",5)(17,"ion-item")(18,"ion-label",6),e._UZ(19,"ion-icon",7),e._uU(20,".RIF"),e.qZA(),e._UZ(21,"ion-input",8),e.qZA(),e._UZ(22,"br"),e.TgZ(23,"ion-item")(24,"ion-label",6),e._UZ(25,"ion-icon",9),e._uU(26,".Razon Social"),e.qZA(),e._UZ(27,"ion-input",10),e.qZA(),e._UZ(28,"br"),e.qZA(),e.TgZ(29,"ion-item")(30,"ion-label",6),e._UZ(31,"ion-icon",11),e._uU(32,".Buscar"),e.qZA(),e.TgZ(33,"ion-input",12),e.NdJ("ngModelChange",function(d){return o.searchText=d})("input",function(d){return o.onSearchInput(d)}),e.qZA()(),e._UZ(34,"br")(35,"br"),e.TgZ(36,"ion-grid")(37,"ion-row")(38,"ion-col",13),e._UZ(39,"strong"),e.qZA(),e.TgZ(40,"ion-col",14)(41,"strong"),e._uU(42,"No"),e.qZA()(),e.TgZ(43,"ion-col",14)(44,"strong"),e._uU(45,"Codigo"),e.qZA()(),e.TgZ(46,"ion-col",15)(47,"strong"),e._uU(48,"Fecha"),e.qZA()(),e.TgZ(49,"ion-col",14)(50,"strong"),e._uU(51,"Saldo"),e.qZA()(),e.TgZ(52,"ion-col",14)(53,"strong"),e._uU(54,"Orden"),e.qZA()(),e.TgZ(55,"ion-col",14)(56,"strong"),e._uU(57,"Accion"),e.qZA()()(),e.YNc(58,P,15,7,"ion-row",16),e.qZA(),e.TgZ(59,"ion-grid")(60,"ion-row"),e._UZ(61,"ion-col",13)(62,"ion-col",14)(63,"ion-col",14)(64,"ion-col",15),e.TgZ(65,"ion-col",14)(66,"ion-item")(67,"ion-label",6),e._UZ(68,"ion-icon",17),e._uU(69,"Monto Total"),e.qZA(),e._UZ(70,"ion-input",18),e.qZA()()()()()),2&t&&(e.Q6J("translucent",!0),e.xp6(4),e.Q6J("fullscreen",!0),e.xp6(12),e.Q6J("formGroup",o.FormData),e.xp6(17),e.Q6J("ngModel",o.searchText),e.xp6(25),e.Q6J("ngForOf",o.displayedItems),e.xp6(12),e.Q6J("disabled",!0)("value",o.montoTotal))},dependencies:[m.sg,m.O5,a._Y,a.JJ,a.JL,a.On,n.wI,n.W2,n.jY,n.Gu,n.gu,n.pK,n.Ie,n.Q$,n.Nd,n.wd,n.sr,n.j9,n.Fo,h.rH,a.sg,a.u]}),l})()}];let O=(()=>{var i;class l{}return(i=l).\u0275fac=function(t){return new(t||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({imports:[h.Bz.forChild(A),h.Bz]}),l})(),x=(()=>{var i;class l{}return(i=l).\u0275fac=function(t){return new(t||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({imports:[m.ez,a.u5,n.Pc,O,a.UX]}),l})()}}]);