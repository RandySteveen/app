"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[5014],{5014:(F,v,i)=>{i.r(v),i.d(v,{SettingsPageModule:()=>P});var T=i(6814),a=i(95),I=i(7217),b=i(7213),U=i(553),c=i(9843),m=i(4193),l=i(5861),p=i(6726),e=i(5879),S=i(6091),y=i(2014);let C=(()=>{var o;class u{constructor(t,n){this.jwtHelper=t,this.storage=n,this.initStorage()}initStorage(){var t=this;return(0,l.Z)(function*(){yield t.storage.create()})()}saveTokenInfo(t){var n=this;return(0,l.Z)(function*(){yield n.storage.set("info",t)})()}getTokenInfo(){var t=this;return(0,l.Z)(function*(){return yield t.storage.get("info")})()}isAuth(){var t=this;return(0,l.Z)(function*(){const n=yield t.getTokenInfo();return!(!n||t.jwtHelper.isTokenExpired(n))})()}authenticateStoredInfo(t){var n=this;return(0,l.Z)(function*(){const r=yield n.getTokenInfo();return!!r&&JSON.parse(r).cedusu===t})()}}return(o=u).\u0275fac=function(t){return new(t||o)(e.LFG(S.N0),e.LFG(y.K))},o.\u0275prov=e.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"}),u})();var k=i(7076),A=i(9862);const N=[{path:"",component:(()=>{var o;class u{constructor(t,n,r,s,g,f,Z,h,w){this.router=t,this.afAuth=n,this.toastController=r,this.loginservice=s,this.tokesrvice=g,this.fb=f,this.http=Z,this.alertController=h,this.platform=w,this.FormSetting=this.fb.group({cedusu:new a.NI(""),cedulaa:new a.NI(""),nomusu:new a.NI(""),email:new a.NI("",a.kI.email),dirusu:new a.NI(""),telse1:new a.NI("")})}ngOnInit(){var t=this;return(0,l.Z)(function*(){t.viewData(),t.corre();const n=yield t.loginservice.getTokenInfo(),{email:r,logusu:s}=(0,p.Z)(n);t.correo=r,t.logusu=s})()}corre(){const t=this.tokesrvice.getLoginInfo(),{email:n}=(0,p.Z)(t);this.correoo=n}viewData(){var t=this;return(0,l.Z)(function*(){var n;const r=yield t.loginservice.getTokenInfo(),{cedusu:s,nomusu:g,email:f,telefono:Z,direccion:h}=(0,p.Z)(r);t.FormSetting.patchValue({cedusu:s,cedulaa:s,nomusu:g,email:f,dirusu:h,telse1:Z}),null===(n=t.FormSetting.get("cedulaa"))||void 0===n||n.disable()})()}recoverByEmail(){var t=this;return(0,l.Z)(function*(){console.log(t.correoo);const r="Recuperaci\xf3n de Contrase\xf1a",s=`Hola ${t.logusu}, sigue este enlace para verificar tu direcci\xf3n de correo electr\xf3nico: https://ionicloagro.firebaseapp.com/__/auth/action?mode=action&oobCode=code Si no solicit\xf3 verificar esta direcci\xf3n, puede ignorar este correo electr\xf3nico. Gracias, Tu equipo de LoAgros.com`;if(t.platform.is("cordova")){const g=`mailTo:${t.correoo}?subject=${encodeURIComponent(r)}&body=${encodeURIComponent(s)}`;window.open(g,"_system")}else window.open(`mailTo:${t.correoo}?subject=${r}&body=${s}`,"_blank")||t.presentToast("Por favor, configure un cliente de correo electr\xf3nico para enviar correos.")})()}generatePasswordResetLink(t){var n=this;return(0,l.Z)(function*(){const r=Math.random().toString(36).substring(2,15)+Math.random().toString(36).substring(2,15);return`${n.correo}=${encodeURIComponent(t)}&token=${r}`})()}presentToast(t){var n=this;return(0,l.Z)(function*(){(yield n.toastController.create({message:t,duration:5e3,position:"middle"})).present()})()}SendData(){var t=this;return(0,l.Z)(function*(){var r;yield(yield t.alertController.create({header:"Actualizar Datos",message:"Deseas Guardar los Cambios",buttons:[{text:"Cancelar",role:"cancel",cssClass:"danger",handler:()=>{}},{text:"Guardar",handler:(r=(0,l.Z)(function*(){try{t.http.post(`${U.N.apiURL}/recover`,t.FormSetting.value).subscribe(),t.presentToast("Datos Actualizados con Exito!!!")}catch(s){console.log("Error al Guardar Datos",s)}}),function(){return r.apply(this,arguments)})}]})).present()})()}end(){this.router.navigate(["eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIxMjM0NTY3ODkwIiwibmFtZSI6ImRhc2hib2FyZCIsImlhdCI6MjgxMzE3ODJ9.iLY3fguIf33n8OTvpZiVqUGAcu1lhxiOZtNZQbKPFGM"])}}return(o=u).\u0275fac=function(t){return new(t||o)(e.Y36(m.F0),e.Y36(b.zQ),e.Y36(c.yF),e.Y36(C),e.Y36(k.F),e.Y36(a.qu),e.Y36(A.eN),e.Y36(c.Br),e.Y36(c.t4))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-settings"]],decls:68,vars:3,consts:[[3,"translucent"],["scroll-y","true",3,"fullscreen"],["align","center",2,"font-size","30px"],["name","settings-outline"],["align","center",2,"font-size","25px"],[3,"formGroup"],["position","floating"],["name","card-outline"],["formControlName","cedulaa"],["name","person-outline"],["formControlName","nomusu"],["name","mail-outline"],["formControlName","email"],["name","phone-portrait-outline"],["formControlName","telse1"],["name","arrow-up-circle-outline"],["formControlName","dirusu"],[1,"button-row"],["color","primary",1,"button-left",3,"click"],["name","mail-sharp"],["expand","block","color","success",3,"click"],["name","bookmark-outline"],["expand","block","color","danger",3,"click"]],template:function(t,n){1&t&&(e.TgZ(0,"ion-header",0)(1,"ion-toolbar")(2,"ion-title"),e._uU(3,"settings"),e.qZA()()(),e.TgZ(4,"ion-content",1),e._UZ(5,"br")(6,"br"),e.TgZ(7,"ion-title",2),e._uU(8," Configuracion "),e._UZ(9,"ion-icon",3),e.qZA(),e._UZ(10,"br")(11,"br"),e.TgZ(12,"ion-title",4),e._uU(13,"Datos del Vendedor"),e.qZA(),e._UZ(14,"br")(15,"br"),e.TgZ(16,"form",5)(17,"ion-item")(18,"ion-label",6),e._UZ(19,"ion-icon",7),e._uU(20,".Cedula del Vendedor"),e.qZA(),e._UZ(21,"ion-input",8),e.qZA(),e._UZ(22,"br"),e.TgZ(23,"ion-item")(24,"ion-label",6),e._UZ(25,"ion-icon",9),e._uU(26,".Nombre del Vendedor"),e.qZA(),e._UZ(27,"ion-input",10),e.qZA(),e._UZ(28,"br"),e.TgZ(29,"ion-item")(30,"ion-label",6),e._UZ(31,"ion-icon",11),e._uU(32,".Correo del Vendedor"),e.qZA(),e._UZ(33,"ion-input",12),e.qZA(),e._UZ(34,"br"),e.TgZ(35,"ion-title",4),e._uU(36,"Datos de Contacto"),e.qZA(),e._UZ(37,"br")(38,"br"),e.TgZ(39,"ion-item")(40,"ion-label",6),e._UZ(41,"ion-icon",13),e._uU(42,".Telefono 1"),e.qZA(),e._UZ(43,"ion-input",14),e.qZA(),e._UZ(44,"br"),e.TgZ(45,"ion-item")(46,"ion-label",6),e._UZ(47,"ion-icon",15),e._uU(48,".Direccion"),e.qZA(),e._UZ(49,"ion-input",16),e.qZA(),e._UZ(50,"br")(51,"br"),e.TgZ(52,"ion-title",2),e._uU(53,"Recuperar Contrase\xf1a"),e.qZA(),e._UZ(54,"br"),e.TgZ(55,"div",17)(56,"ion-button",18),e.NdJ("click",function(){return n.recoverByEmail()}),e._UZ(57,"ion-icon",19),e._uU(58,".Gmail"),e.qZA()()(),e._UZ(59,"br")(60,"br"),e.TgZ(61,"ion-button",20),e.NdJ("click",function(){return n.SendData()}),e._UZ(62,"ion-icon",21),e._uU(63,".Guardar"),e.qZA(),e._UZ(64,"br"),e.TgZ(65,"ion-button",22),e.NdJ("click",function(){return n.end()}),e._UZ(66,"ion-icon",21),e._uU(67,".Salir"),e.qZA()()),2&t&&(e.Q6J("translucent",!0),e.xp6(4),e.Q6J("fullscreen",!0),e.xp6(12),e.Q6J("formGroup",n.FormSetting))},dependencies:[a._Y,a.JJ,a.JL,c.YG,c.W2,c.Gu,c.gu,c.pK,c.Ie,c.Q$,c.wd,c.sr,c.j9,a.sg,a.u],styles:[".button-row[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:80px}.button-left[_ngcontent-%COMP%]{flex:1;text-align:left}.button-center[_ngcontent-%COMP%]{flex:1;text-align:center}.button-right[_ngcontent-%COMP%]{flex:1;text-align:right}"]}),u})()}];let _=(()=>{var o;class u{}return(o=u).\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({imports:[m.Bz.forChild(N),m.Bz]}),u})(),P=(()=>{var o;class u{}return(o=u).\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({imports:[T.ez,a.u5,c.Pc,_,a.UX,I.hO.initializeApp(U.N.firebaseConfig),b.ww]}),u})()}}]);