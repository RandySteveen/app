"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[6267],{6267:(O,T,r)=>{r.r(T),r.d(T,{ViewordersglobalPageModule:()=>M});var f=r(6814),u=r(95),s=r(9843),p=r(4193),h=r(5861),b=r(553),w=r(6726),v=r(7921),e=r(5879),_=r(9862),U=r(7076),P=r(7584),A=r(2014);function x(i,a){if(1&i){const n=e.EpF();e.TgZ(0,"a",14),e.NdJ("click",function(){e.CHM(n);const t=e.oxw().$implicit,l=e.oxw();return e.KtG(l.editorders(t.idsuc,t.idpedido))}),e._UZ(1,"ion-icon",15),e.qZA()}}function y(i,a){if(1&i){const n=e.EpF();e.TgZ(0,"a",14),e.NdJ("click",function(){e.CHM(n);const t=e.oxw().$implicit,l=e.oxw();return e.KtG(l.deleteOrders(t.idpedido))}),e._UZ(1,"ion-icon",16),e.qZA()}}function I(i,a){if(1&i&&(e.TgZ(0,"ion-row"),e._UZ(1,"ion-col",8),e.TgZ(2,"ion-col",9),e._uU(3),e.qZA(),e.TgZ(4,"ion-col",9),e._uU(5),e.qZA(),e.TgZ(6,"ion-col",9),e._uU(7),e.qZA(),e.TgZ(8,"ion-col",9),e._uU(9),e.qZA(),e.TgZ(10,"ion-col",9),e._uU(11),e.qZA(),e.TgZ(12,"ion-col",9),e._uU(13),e.qZA(),e.TgZ(14,"ion-col",9),e.YNc(15,x,2,0,"a",13),e.YNc(16,y,2,0,"a",13),e.qZA()()),2&i){const n=a.$implicit;e.xp6(3),e.hij(" ",n.idpedido," "),e.xp6(2),e.hij(" ",n.codcli," "),e.xp6(2),e.hij(" ",n.idsuc," "),e.xp6(2),e.hij(" ",n.fecped," "),e.xp6(2),e.hij(" ",n.monnet," "),e.xp6(2),e.hij(" ","0"===n.estped?"Por Transmitir":"Transmitido"," "),e.xp6(2),e.Q6J("ngIf","0"===n.estped),e.xp6(1),e.Q6J("ngIf","0"===n.estped)}}const V=[{path:"",component:(()=>{var i;class a{constructor(o,t,l,c,g,d,Z,m){this.http=o,this.loginService=t,this.RoutingService=l,this.storage=c,this.route=g,this.router=d,this.fb=Z,this.alertcontroller=m,this.searchText="",this.items=[],this.currentPage=1,this.itemsPerPageOptions=[5,10,20],this.itemsPerPage=10,this.displayedItems=[],this.totalPages=1,this.totalMonto=0,this.initStorage(),this.formDelete=this.fb.group({idpedido:new u.NI("")})}initStorage(){var o=this;return(0,h.Z)(function*(){yield o.storage.create()})()}ngOnInit(){this.RoutingService.codved$.pipe((0,v.O)([])).subscribe(o=>{this.ViewData()})}ViewData(){var o=this;return(0,h.Z)(function*(){const t=yield o.loginService.getLoginInfo(),{cedusu:l}=(0,w.Z)(t);o.RoutingService.codved$.pipe((0,v.O)([])).subscribe(c=>{o.http.post(`${b.N.apiOrdersUrl}/global/${l}`,c).subscribe(g=>{o.items=g.info,o.dato=g,o.loadDisplayedItems(),o.idpedido=o.dato.info[0].idpedido,o.idsuc=o.dato.info[0].idsuc,o.totalMonto=o.dato.info.reduce((d,Z)=>d+Z.monnet,0).toFixed(2),o.storage.set("view_data",o.dato.info)})})})()}onSearchInput(o){const t=o.target;null!=t.value&&(this.searchText=t.value,this.loadDisplayedItems())}loadDisplayedItems(){const o=(this.currentPage-1)*this.itemsPerPage;this.displayedItems=this.filteredItems.slice(o,o+this.itemsPerPage)}get filteredItems(){return this.items.filter(o=>o.codcli.toLowerCase().includes(this.searchText.toLowerCase()))}editorders(o,t){this.route.navigate(["ordeslistglobal",o,t])}deleteOrders(o){var t=this;return(0,h.Z)(function*(){var l,g;null===(l=t.formDelete.get("idpedido"))||void 0===l||l.setValue(o),yield(yield t.alertcontroller.create({header:"Eliminar Pedido",message:"\xbfSeguro que quieres eliminar el pedido seleccionado?",buttons:[{text:"Cancelar",role:"cancel",cssClass:"secondary",handler:()=>{}},{text:"Eliminar",handler:(g=(0,h.Z)(function*(){try{t.http.delete(`${b.N.apiOrdersUrl}/delete`,{body:{idpedido:o}}).subscribe(Z=>{const m=t.items.findIndex(F=>F.idpedido===o);-1!==m&&(t.items.splice(m,1),window.location.reload())})}catch(d){console.error("Error al eliminar el pedido:",d)}}),function(){return g.apply(this,arguments)})}]})).present()})()}}return(i=a).\u0275fac=function(o){return new(o||i)(e.Y36(_.eN),e.Y36(U.F),e.Y36(P.E),e.Y36(A.K),e.Y36(p.F0),e.Y36(p.gz),e.Y36(u.qu),e.Y36(s.Br))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-viewordersglobal"]],decls:66,vars:6,consts:[[3,"translucent"],[3,"fullscreen"],["align","center"],["routerLink","/dashboard",2,"float","right","margin-right","30px"],["name","arrow-forward-outline","color","danger",2,"font-size","3em"],["position","floating"],["name","search-outline"],["placeholder","Buscar...",1,"custom-search-input",3,"ngModel","ngModelChange","input"],["size","1"],["size","1.5"],[4,"ngFor","ngForOf"],["name","cash-outline"],[3,"disabled","value"],[3,"click",4,"ngIf"],[3,"click"],["name","create-outline",2,"font-size","35px","color","greenyellow"],["name","trash-outline",2,"font-size","35px","color","rgb(216, 15, 15)"]],template:function(o,t){1&o&&(e.TgZ(0,"ion-header",0)(1,"ion-toolbar")(2,"ion-title"),e._uU(3,"viewordersglobal"),e.qZA()()(),e.TgZ(4,"ion-content",1),e._UZ(5,"br"),e.TgZ(6,"ion-title",2),e._uU(7,"Pedidos Activos"),e.qZA(),e._UZ(8,"br")(9,"br"),e.TgZ(10,"a",3),e._UZ(11,"ion-icon",4),e.qZA(),e._UZ(12,"br")(13,"br")(14,"br"),e.TgZ(15,"ion-item")(16,"ion-label",5),e._UZ(17,"ion-icon",6),e._uU(18,".Buscar"),e.qZA(),e.TgZ(19,"ion-input",7),e.NdJ("ngModelChange",function(c){return t.searchText=c})("input",function(c){return t.onSearchInput(c)}),e.qZA()(),e._UZ(20,"br")(21,"br"),e.TgZ(22,"ion-grid")(23,"ion-row")(24,"ion-col",8),e._UZ(25,"strong"),e.qZA(),e.TgZ(26,"ion-col",9)(27,"strong"),e._uU(28,"No"),e.qZA()(),e.TgZ(29,"ion-col",9)(30,"strong"),e._uU(31,"RIF"),e.qZA()(),e.TgZ(32,"ion-col",9)(33,"strong"),e._uU(34,"Sucursal"),e.qZA()(),e.TgZ(35,"ion-col",9)(36,"strong"),e._uU(37,"Fecha"),e.qZA()(),e.TgZ(38,"ion-col",9)(39,"strong"),e._uU(40,"Saldo"),e.qZA()(),e.TgZ(41,"ion-col",9)(42,"strong"),e._uU(43,"Orden"),e.qZA()(),e.TgZ(44,"ion-col",9)(45,"strong"),e._uU(46,"Accion"),e.qZA()()(),e.YNc(47,I,17,8,"ion-row",10),e.qZA(),e.TgZ(48,"ion-grid")(49,"ion-row")(50,"ion-col",8),e._UZ(51,"strong"),e.qZA(),e.TgZ(52,"ion-col",9),e._UZ(53,"strong"),e.qZA(),e.TgZ(54,"ion-col",9),e._UZ(55,"strong"),e.qZA(),e.TgZ(56,"ion-col",9),e._UZ(57,"strong"),e.qZA(),e.TgZ(58,"ion-col",9),e._UZ(59,"strong"),e.qZA(),e.TgZ(60,"ion-col",9)(61,"ion-item")(62,"ion-label",5),e._UZ(63,"ion-icon",11),e._uU(64,"Monto Total"),e.qZA(),e._UZ(65,"ion-input",12),e.qZA()()()()()),2&o&&(e.Q6J("translucent",!0),e.xp6(4),e.Q6J("fullscreen",!0),e.xp6(15),e.Q6J("ngModel",t.searchText),e.xp6(28),e.Q6J("ngForOf",t.displayedItems),e.xp6(18),e.Q6J("disabled",!0)("value",t.totalMonto))},dependencies:[f.sg,f.O5,u.JJ,u.On,s.wI,s.W2,s.jY,s.Gu,s.gu,s.pK,s.Ie,s.Q$,s.Nd,s.wd,s.sr,s.j9,s.Fo,p.rH],styles:['@charset "UTF-8";.custom-search-input[_ngcontent-%COMP%]{border:none;border-bottom:1px solid #000;border-radius:0;padding:.5rem;background-color:transparent;width:100%;font-size:1rem;color:#fff;outline:none}.custom-search-input[_ngcontent-%COMP%]:focus{border-bottom:2px solid #007bff}']}),a})()}];let q=(()=>{var i;class a{}return(i=a).\u0275fac=function(o){return new(o||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({imports:[p.Bz.forChild(V),p.Bz]}),a})(),M=(()=>{var i;class a{}return(i=a).\u0275fac=function(o){return new(o||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({imports:[f.ez,u.u5,s.Pc,q]}),a})()}}]);