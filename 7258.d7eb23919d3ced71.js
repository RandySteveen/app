"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[7258],{7258:(O,f,u)=>{u.r(f),u.d(f,{InvoiceDataPageModule:()=>N});var d=u(6814),r=u(95),s=u(9843),m=u(4193),h=u(5861),_=u(553),e=u(5879),Z=u(9862);function T(i,c){1&i&&(e.ynx(0),e._uU(1," NOTA "),e.BQk())}function v(i,c){1&i&&e._uU(0," Factura ")}function P(i,c){if(1&i&&(e.TgZ(0,"ion-row")(1,"ion-col"),e._uU(2),e.qZA(),e.TgZ(3,"ion-col"),e._uU(4),e.qZA(),e.TgZ(5,"ion-col",1),e._uU(6),e.qZA(),e.TgZ(7,"ion-col",1),e._uU(8),e.qZA(),e.TgZ(9,"ion-col",1),e._uU(10),e.qZA()()),2&i){const n=c.$implicit;e.xp6(2),e.Oqu(n.codart),e.xp6(2),e.Oqu(n.desart),e.xp6(2),e.Oqu(n.canart),e.xp6(2),e.Oqu(n.preart),e.xp6(2),e.hij(" ",n.subtota," ")}}let I=(()=>{var i;class c{constructor(t,o,a){this.modalController=t,this.http=o,this.route=a,this.items=[],this.displayedItems=[],this.currentPage=1,this.itemsPerPage=10,this.searchText="",this.totalPages=1,this.itemsPerPageOptions=[5,10,20],this.totalSubtotal=0;const l=new Date,g=l.getDate().toString().padStart(2,"0"),p=(l.getMonth()+1).toString().padStart(2,"0"),J=l.getFullYear().toString();this.currentDate=`${g}/${p}/${J}`}ngOnInit(){this.ViewData2(),this.ViewData()}ViewData(){this.http.get(`${_.N.apiInvoicesUrl}/detailed/${this.codmov}/${this.codfmv}`).subscribe(t=>{this.info=t.info,this.fecmov=this.info[0].fecmov,this.tipdoc=this.info[0].codmfv,this.loadDisplayedItems()})}goToPage(t){t>=1&&t<=this.totalPages&&(this.currentPage=t,this.loadDisplayedItems(),localStorage.setItem("storedClients",JSON.stringify(this.items)))}ViewData2(){this.http.get(`${_.N.apiInvoicesUrl}/detailed/${this.codmov}/${this.codfmv}`).subscribe(t=>{this.info2=t.info,this.items=this.info2,this.loadDisplayedItems(),console.log(this.codmov),console.log(this.codfmv)})}calculateTotalSubtotal(){this.totalSubtotal=this.items.reduce((t,o)=>t+o.subtota,0)}loadDisplayedItems(){const t=(this.currentPage-1)*this.itemsPerPage;this.displayedItems=this.filteredItems.slice(t,t+this.itemsPerPage),this.totalPages=Math.ceil(this.filteredItems.length/this.itemsPerPage)}sortColumn(t){this.filteredItems.sort((o,a)=>o[t]<a[t]?-1:o[t]>a[t]?1:0),this.loadDisplayedItems()}onPageChange(t){this.itemsPerPage=t.detail.value,this.currentPage=1,this.loadDisplayedItems()}get filteredItems(){return this.items.filter(t=>t.codart.toLowerCase().includes(this.searchText.toLowerCase()))}close(){this.modalController.dismiss({role:"cancel"})}}return(i=c).\u0275fac=function(t){return new(t||i)(e.Y36(s.IN),e.Y36(Z.eN),e.Y36(m.gz))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-components"]],inputs:{codmov:"codmov",codfmv:"codfmv"},decls:64,vars:11,consts:[["color","success"],["align","center"],["slot","end"],[3,"click"],["slot","icon-only","name","close"],["collapse","condense"],["size","large"],["size","6"],["src","../../../../assets/LOGO LOAGROS FONDO NEGRO.png","alt","Logo de la empresa",2,"max-width","140px"],[4,"ngIf","ngIfElse"],["factura",""],[4,"ngFor","ngForOf"],["lines","full"],[3,"disabled","click"]],template:function(t,o){if(1&t&&(e.TgZ(0,"ion-header")(1,"ion-toolbar",0)(2,"ion-title",1),e._uU(3,"FACTURA DETALLADA"),e.qZA(),e.TgZ(4,"ion-buttons",2)(5,"ion-button",3),e.NdJ("click",function(){return o.close()}),e._UZ(6,"ion-icon",4),e.qZA()()()(),e.TgZ(7,"ion-content")(8,"ion-header",5)(9,"ion-toolbar")(10,"ion-title",6),e._uU(11,"Factura Detallada"),e.qZA()()(),e.TgZ(12,"ion-grid")(13,"ion-row")(14,"ion-col",7),e._UZ(15,"img",8),e.qZA(),e.TgZ(16,"ion-col",7),e._UZ(17,"br"),e.TgZ(18,"ion-label"),e._uU(19,"Tipo de Documento: "),e.YNc(20,T,2,0,"ng-container",9),e.YNc(21,v,1,0,"ng-template",null,10,e.W1O),e.qZA(),e._UZ(23,"br"),e.TgZ(24,"ion-label"),e._uU(25),e.ALo(26,"date"),e.qZA(),e._UZ(27,"br"),e.TgZ(28,"ion-label"),e._uU(29),e.qZA()()()(),e._UZ(30,"br")(31,"br")(32,"br"),e.TgZ(33,"table")(34,"ion-row")(35,"ion-col"),e._uU(36,"CodArt"),e.qZA(),e.TgZ(37,"ion-col"),e._uU(38,"Descripci\xf3n"),e.qZA(),e.TgZ(39,"ion-col",1),e._uU(40,"Cantidad"),e.qZA(),e.TgZ(41,"ion-col",1),e._uU(42,"Precio Art"),e.qZA(),e.TgZ(43,"ion-col",1),e._uU(44,"Subtotal"),e.qZA()(),e.YNc(45,P,11,5,"ion-row",11),e.qZA(),e._UZ(46,"br")(47,"br"),e.TgZ(48,"ion-item",12)(49,"ion-label"),e._uU(50,"Total"),e.qZA(),e._UZ(51,"ion-label")(52,"ion-label")(53,"ion-label"),e.TgZ(54,"ion-label"),e._uU(55),e.qZA()(),e._UZ(56,"br")(57,"br")(58,"br"),e.TgZ(59,"ion-buttons")(60,"ion-button",13),e.NdJ("click",function(){return o.goToPage(o.currentPage-1)}),e._uU(61,"Anterior"),e.qZA(),e.TgZ(62,"ion-button",13),e.NdJ("click",function(){return o.goToPage(o.currentPage+1)}),e._uU(63,"Siguiente"),e.qZA()()()),2&t){const a=e.MAs(22);e.xp6(20),e.Q6J("ngIf","05"===o.tipdoc)("ngIfElse",a),e.xp6(5),e.hij("Fecha: ",e.xi3(26,8,o.fecmov,"dd/MM/yyyy")," "),e.xp6(4),e.hij("N\xfamero: ",o.codmov,""),e.xp6(16),e.Q6J("ngForOf",o.displayedItems),e.xp6(10),e.Oqu(o.totalSubtotal.toFixed(2)),e.xp6(5),e.Q6J("disabled",1===o.currentPage),e.xp6(2),e.Q6J("disabled",o.currentPage===o.totalPages)}},dependencies:[d.sg,d.O5,s.YG,s.Sm,s.wI,s.W2,s.jY,s.Gu,s.gu,s.Ie,s.Q$,s.Nd,s.wd,s.sr,d.uU],styles:["table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse}"]}),c})();function A(i,c){if(1&i&&(e.TgZ(0,"ion-col",11),e._uU(1),e.ALo(2,"date"),e.qZA()),2&i){const n=e.oxw().$implicit;e.xp6(1),e.Oqu(e.xi3(2,1,n.fecent,"dd/MM/yyyy"))}}function U(i,c){1&i&&e._UZ(0,"ion-col",11)}function b(i,c){if(1&i&&(e.TgZ(0,"ion-col",11),e._uU(1),e.qZA()),2&i){const n=e.oxw().$implicit;e.xp6(1),e.hij("",n.diferenciaFechas," d\xedas ")}}function D(i,c){1&i&&e._UZ(0,"ion-col",11)}function C(i,c){if(1&i){const n=e.EpF();e.TgZ(0,"a",18),e.NdJ("click",function(){e.CHM(n);const o=e.oxw().$implicit,a=e.oxw();return e.KtG(a.ir(o.codcli,o.codmov,o.codfmv))}),e._UZ(1,"ion-icon",21),e.qZA()}}function q(i,c){if(1&i){const n=e.EpF();e.TgZ(0,"a",18),e.NdJ("click",function(){e.CHM(n);const o=e.oxw().$implicit,a=e.oxw();return e.KtG(a.ir2(o.codcli))}),e._UZ(1,"ion-icon",22),e.qZA()}}function x(i,c){if(1&i){const n=e.EpF();e.TgZ(0,"ion-row"),e._UZ(1,"ion-col",11),e.TgZ(2,"ion-col",16),e._uU(3),e.qZA(),e.TgZ(4,"ion-col",11),e._uU(5),e.qZA(),e.TgZ(6,"ion-col",11),e._uU(7),e.qZA(),e.YNc(8,A,3,4,"ion-col",17),e.YNc(9,U,1,0,"ion-col",17),e.TgZ(10,"ion-col",11),e._uU(11),e.ALo(12,"date"),e.qZA(),e.YNc(13,b,2,1,"ion-col",17),e.YNc(14,D,1,0,"ion-col",17),e.TgZ(15,"ion-col",11),e._uU(16),e.qZA(),e.TgZ(17,"ion-col",11),e._uU(18),e.qZA(),e.TgZ(19,"ion-col",11),e._uU(20),e.qZA(),e.TgZ(21,"ion-col",11),e._uU(22),e.qZA(),e.TgZ(23,"ion-col",11)(24,"a",18),e.NdJ("click",function(){const a=e.CHM(n).$implicit,l=e.oxw();return e.KtG(l.openAddressModal(a.codmov,a.codfmv))}),e._UZ(25,"ion-icon",19),e.qZA(),e.YNc(26,C,2,0,"a",20),e.YNc(27,q,2,0,"a",20),e.qZA()()}if(2&i){const n=c.$implicit,t=c.index,o=e.oxw();e.xp6(3),e.Oqu(n.codfmv),e.xp6(2),e.hij(" ",(o.currentPage-1)*o.itemsPerPage+t+1," "),e.xp6(2),e.hij(" ",n.codmov," "),e.xp6(1),e.Q6J("ngIf","FC"===n.estfac),e.xp6(1),e.Q6J("ngIf","FC"!==n.estfac),e.xp6(2),e.hij(" ",e.xi3(12,14,n.fecven,"dd/MM/yyyy"),""),e.xp6(2),e.Q6J("ngIf","FC"===n.estfac),e.xp6(1),e.Q6J("ngIf","FC"!==n.estfac),e.xp6(2),e.hij(" ",n.numcarg," "),e.xp6(2),e.Oqu(o.getEstadoFacturaText(n.estfac)),e.xp6(2),e.hij(" ",n.saldou," "),e.xp6(2),e.Oqu("FC"===n.estfac?"Activa":""),e.xp6(4),e.Q6J("ngIf","FC"===n.estfac),e.xp6(1),e.Q6J("ngIf","FC"===n.estfac)}}function w(i,c){if(1&i&&(e.TgZ(0,"ion-select-option",23),e._uU(1),e.qZA()),2&i){const n=c.$implicit;e.Q6J("value",n),e.xp6(1),e.hij(" ",n," ")}}const y=[{path:"",component:(()=>{var i;class c{constructor(t,o,a,l,g){this.router=t,this.modalController=o,this.http=a,this.route=l,this.fb=g,this.searchText="",this.items=[],this.currentPage=1,this.itemsPerPageOptions=[5,10,20],this.itemsPerPage=10,this.displayedItems=[],this.totalPages=1,this.FormInvoice=this.fb.group({nomcli:new r.NI(""),codcli:new r.NI("")}),this.itemsPerPage=this.itemsPerPageOptions[0]}ngOnInit(){this.viewData(),this.viewDataTable()}ir(t,o,a){this.router.navigate(["invoice-old-details",t,o,a])}ir2(t){this.router.navigate(["pagoinvoiceold",t])}openAddressModal(t,o){var a=this;return(0,h.Z)(function*(){return yield(yield a.modalController.create({component:I,componentProps:{codmov:t,codfmv:o}})).present()})()}onSearchInput(t){const o=t.target;null!=o.value&&(this.searchText=o.value,this.loadDisplayedItems())}get filteredItems(){return this.items.filter(t=>t.codmov.toLowerCase().includes(this.searchText.toLowerCase())||t.estfac.toLowerCase().includes(this.searchText.toLowerCase()))}loadDisplayedItems(){const t=(this.currentPage-1)*this.itemsPerPage;this.displayedItems=this.filteredItems.slice(t,t+this.itemsPerPage)}onPageChange(t){console.log(t),this.itemsPerPage=t.detail.value,this.totalPages=Math.ceil(this.filteredItems.length/this.itemsPerPage),this.currentPage=1,this.loadDisplayedItems()}goToPage(t){t>=1&&t<=this.totalPages&&(this.currentPage=t,this.loadDisplayedItems(),localStorage.setItem("storedClients",JSON.stringify(this.items)))}viewData(){var t=this;return(0,h.Z)(function*(){t.codcli=yield t.route.snapshot.paramMap.get("codcli"),t.http.get(`${_.N.apiInvoicesUrl}/client/${t.codcli}`).subscribe(o=>{var a,l,g,p;t.info=o.client,t.info&&t.info.length>0&&(t.FormInvoice.patchValue({nomcli:null===(a=t.info[0])||void 0===a?void 0:a.nomcli,codcli:null===(l=t.info[0])||void 0===l?void 0:l.codcli}),null===(g=t.FormInvoice.get("nomcli"))||void 0===g||g.disable(),null===(p=t.FormInvoice.get("codcli"))||void 0===p||p.disable())})})()}viewDataTable(){var t=this;return(0,h.Z)(function*(){t.codcli=yield t.route.snapshot.paramMap.get("codcli"),t.http.get(`${_.N.apiInvoicesUrl}/client/${t.codcli}`).subscribe(o=>{t.items=o.info,t.items.forEach(a=>{if("FC"===a.estfac){const g=(new Date).getTime()-new Date(a.fecent).getTime(),p=Math.floor(g/864e5);a.diferenciaFechas=p}}),t.loadDisplayedItems()})})()}getEstadoFacturaText(t){switch(t){case"FC":return"Cobranza";case"FE":return"Facturado";case"FV":return"Almacen";case"FT":return"Transito";case"FA":case"FR":return"Procesando";default:return"Desconocido"}}}return(i=c).\u0275fac=function(t){return new(t||i)(e.Y36(m.F0),e.Y36(s.IN),e.Y36(Z.eN),e.Y36(m.gz),e.Y36(r.qu))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-invoice-data"]],decls:77,vars:9,consts:[[3,"translucent"],["scroll-y","true",3,"fullscreen"],["align","center"],[3,"formGroup"],["position","floating"],["name","newspaper-outline"],["formControlName","codcli"],["name","document-text-outline"],["formControlName","nomcli"],["name","search-outline"],["placeholder","Buscar...",1,"custom-search-input",3,"ngModel","ngModelChange","input"],["size","1"],[4,"ngFor","ngForOf"],["color","success",2,"margin-left","20px",3,"value","ionChange"],["color","success",3,"value",4,"ngFor","ngForOf"],[3,"disabled","click"],["size","1","hidden","true"],["size","1",4,"ngIf"],[3,"click"],["name","newspaper-outline",2,"color","rgb(20, 198, 243)","font-size","30px"],[3,"click",4,"ngIf"],["name","receipt-outline",2,"color","rgb(228, 243, 20)","font-size","30px","margin-left","5px"],["name","cash-outline",2,"color","greenyellow","font-size","30px","margin-left","5px"],["color","success",3,"value"]],template:function(t,o){1&t&&(e.TgZ(0,"ion-header",0)(1,"ion-toolbar")(2,"ion-title"),e._uU(3,"invoiceData"),e.qZA()()(),e.TgZ(4,"ion-content",1),e._UZ(5,"br"),e.TgZ(6,"ion-title",2),e._uU(7,"Data Facturas"),e.qZA(),e._UZ(8,"br")(9,"br"),e.TgZ(10,"ion-title",2),e._uU(11,"Datos del Cliente"),e.qZA(),e._UZ(12,"br")(13,"br"),e.TgZ(14,"form",3)(15,"ion-item")(16,"ion-label",4),e._UZ(17,"ion-icon",5),e._uU(18,".RIF"),e.qZA(),e._UZ(19,"ion-input",6),e.qZA(),e._UZ(20,"br"),e.TgZ(21,"ion-item")(22,"ion-label",4),e._UZ(23,"ion-icon",7),e._uU(24,".Razon Social "),e.qZA(),e._UZ(25,"ion-input",8),e.qZA()(),e._UZ(26,"br")(27,"br")(28,"br"),e.TgZ(29,"ion-item")(30,"ion-label",4),e._UZ(31,"ion-icon",9),e._uU(32,".Buscar"),e.qZA(),e.TgZ(33,"ion-input",10),e.NdJ("ngModelChange",function(l){return o.searchText=l})("input",function(l){return o.onSearchInput(l)}),e.qZA()(),e._UZ(34,"br")(35,"br"),e.TgZ(36,"ion-grid")(37,"ion-row"),e._UZ(38,"ion-col",11),e.TgZ(39,"ion-col",11)(40,"strong"),e._uU(41,"No"),e.qZA()(),e.TgZ(42,"ion-col",11)(43,"strong"),e._uU(44,"Documento"),e.qZA()(),e.TgZ(45,"ion-col",11)(46,"strong"),e._uU(47,"Recepci\xf2n"),e.qZA()(),e.TgZ(48,"ion-col",11)(49,"strong"),e._uU(50,"Vencimiento"),e.qZA()(),e.TgZ(51,"ion-col",11)(52,"strong"),e._uU(53,"Faltantes"),e.qZA()(),e.TgZ(54,"ion-col",11)(55,"strong"),e._uU(56,"Despacho"),e.qZA()(),e.TgZ(57,"ion-col",11)(58,"strong"),e._uU(59,"Status"),e.qZA()(),e.TgZ(60,"ion-col",11)(61,"strong"),e._uU(62,"Saldo"),e.qZA()(),e.TgZ(63,"ion-col",11)(64,"strong"),e._uU(65,"Orden"),e.qZA()(),e.TgZ(66,"ion-col",11)(67,"strong"),e._uU(68,"Acciones"),e.qZA()()(),e.YNc(69,x,28,17,"ion-row",12),e.qZA(),e.TgZ(70,"ion-select",13),e.NdJ("ionChange",function(l){return o.onPageChange(l)}),e.YNc(71,w,2,2,"ion-select-option",14),e.qZA(),e.TgZ(72,"ion-buttons")(73,"ion-button",15),e.NdJ("click",function(){return o.goToPage(o.currentPage-1)}),e._uU(74,"Anterior"),e.qZA(),e.TgZ(75,"ion-button",15),e.NdJ("click",function(){return o.goToPage(o.currentPage+1)}),e._uU(76,"Siguiente"),e.qZA()()()),2&t&&(e.Q6J("translucent",!0),e.xp6(4),e.Q6J("fullscreen",!0),e.xp6(10),e.Q6J("formGroup",o.FormInvoice),e.xp6(19),e.Q6J("ngModel",o.searchText),e.xp6(36),e.Q6J("ngForOf",o.displayedItems),e.xp6(1),e.Q6J("value",o.itemsPerPage),e.xp6(1),e.Q6J("ngForOf",o.itemsPerPageOptions),e.xp6(2),e.Q6J("disabled",1===o.currentPage),e.xp6(2),e.Q6J("disabled",o.currentPage===o.totalPages))},dependencies:[d.sg,d.O5,r._Y,r.JJ,r.JL,r.On,s.YG,s.Sm,s.wI,s.W2,s.jY,s.Gu,s.gu,s.pK,s.Ie,s.Q$,s.Nd,s.t9,s.n0,s.wd,s.sr,s.QI,s.j9,r.sg,r.u,d.uU]}),c})()}];let F=(()=>{var i;class c{}return(i=c).\u0275fac=function(t){return new(t||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({imports:[m.Bz.forChild(y),m.Bz]}),c})(),N=(()=>{var i;class c{}return(i=c).\u0275fac=function(t){return new(t||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({imports:[d.ez,r.u5,s.Pc,F,r.UX]}),c})()}}]);